<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-9"><meta name="date" content="2008-07-22T10:49:28+03:00"><title>Gerçekleþtirme</title><link rel="icon" type="image/png" href="../images/belgeler-logo.png"><link rel="stylesheet" href="../belgeler.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V-special(derived from 1.49 for Turkish Linux Documentation WG by Nilgün Belma Bugüner - nilgun@superonline.com)"><link rel="home" href="../KiTAPLIK/index.html" title="Linux Kitaplýðý"><link rel="up" href="../howto/secure-boot-cd-howto.html" title="VPN için Güvenli Açýlýþ CD'si NASIL"><link rel="previous" href="../howto/secure-boot-cd-technologies.html" title="Teknolojiler"><link rel="next" href="../howto/secure-boot-cd-maintenance.html" title="Bakým"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><table width="100%" summary="Navigation header" cellpadding="1" cellspacing="0" border="0"><tr><td bgcolor="black" class="navoutline"><table width="100%" cellpadding="0" cellspacing="0" border="0"><tr><td bgcolor="white" class="navinline"><table width="100%" cellpadding="3" cellspacing="0" border="0"><tr><th colspan="3" align="center">Gerçekleþtirme</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="../howto/secure-boot-cd-technologies.html">Önceki</a> </td><th width="60%" align="center">VPN için Güvenli Açýlýþ CD'si NASIL</th><td width="20%" align="right"> <a accesskey="n" href="../howto/secure-boot-cd-maintenance.html">Sonraki</a></td></tr></table></td></tr></table></td></tr></table><dl><div class="sect1"><dt><div> <h2 class="title" style="clear: both"><a name="secure-boot-cd-implementation"></a>Gerçekleþtirme</h2></div></dt><dd><p>Nasýl bir yol izlenmesi gerektiðine dair bir çok karar alýnmasý gereklidir. Takip eden bölümlerde çalýþan bir prototip elde edene kadar yaptýklarýmý bulacaksýnýz. Benim yaptýklarýmý kendi sisteminize göre uyarlamayý unutmayýn. Gerekli yerlede açýklayýcý yorumlar yapmaya çalýþtým.</p><p>Bir çok çalýþan CD daðýtýmýný inceledim ve sonunda ihtiyaçlarýmýz için en uygununun DSL olduðuna karar verdim. Üzerinde düþündüðüm daðýtýmlar þunlardý:
		<div class="orderedlist"><ol type="1"><li><div class="listitem"> Ubuntu. Bu çalýþan CD göreceli olarak daha fazla sistem kaynaðýna ihtiyaç duyduðu gibi bu projede ihtiyaç duyduklarýmýzýndan çok fazla uygulama içeriyor. Çok fazla uygulamayý kaldýrmakla uðraþmak yerine bu daðýtýmý kullanmamayý tercih ettim. Eðer istediðiniz kullanýcýlarýnýzýn masaüstlerine eriþimin YANINDA iç aðýnýza da eriþmelerini istiyorsanýz ubuntu iyi bir seçim olabilir.</div></li><li><div class="listitem"> PuppyLinux. Bu çalýþan CD gerçekten iyi görünmesine raðmen kök dosya sistemi olarak kullandýðý SFS'yi biçimlendiriken sorunlar yaþadým ve okuduklarýmdan Knoppix'in sýkýþtýrýlmýþ dosya sistemiyle daha kolayca yönetildiðini anladým.</div></li><li><div class="listitem"> Knoppix. Bu çalýþan CD de, Ubuntu gibi, projemizin özel amaçlarý için çok fazla aðýr bir daðýtýmdýr.</div></li><li><div class="listitem"> Damn Small Linux. Bu çalýþan CD 50 MB olmasýna raðmen neredeyse tüm donanýmlarda çalýþtýðýndan projenin hayata geçirilmesinde onu kullanmayý seçtim.</div></li></ol></div>
	</p><dl><div class="sect2"><dt><div> <h3 class="title"><a name="secure-boot-cd-implementation-getting-iso"></a>DSL-tabanlý .ISO dosyasýnýn düzenlenmesi</h3></div></dt><dd><p>DSL'i seçtiðimize göre onun aða DHCP ile dahil olmasý için gereken otomatik bulma, yapýlandýrma ve baðlanma yeteneklerine güveniyoruz demektir. DSL'in kablosuz desteði son derece sýnýrlý olduðundan þimdilik kablosuz desteði vermiyoruz. Son kullanýcý að kablosuyla baðlanan bir bilgisayara ve bulunduðu aðda DHCP sunucusuna ihtiyaç duyacaktýr.		
		<div class="orderedlist"><ol type="1"><li><div class="listitem"> Yeni bir <a href="http://www.ubuntu.com" target="_top">Ubuntu</a>, <a href="http://www.edubuntu.org" target="_top">EdUbuntu</a>, <a href="http://www.xubuntu.org" target="_top">xUbuntu</a> veya <a href="http://www.kubuntu.org" target="_top">kUbuntu</a> kurun,<sup>[<a name="id1" href="#ftn.id1">38</a>]</sup></div></li><li><div class="listitem"> Synaptic kullanarak mümkün olan bütün depolarý ekleyin,</div></li><li><div class="listitem"> qemu, open-vpn ve cloop-utils paketlerini kurun,</div></li><li><div class="listitem"> Bir ISO dosyasý edinin (ben dsl-3.0 öneriyorum<sup>[<a name="id1" href="#ftn.id1">39</a>]</sup>); umarým yakýnda (VPN anahtarlarýný içermeyen) prototip ISO'larýmdan birini indirebileceðiniz bir yere koyabilirim. Bu ISO baþlamak için uygun olacaktýr.</div></li><li><div class="listitem"> ISO'yu uygun bir dizine baðlayýn.
		<div class="screen" align="right"><table width="95%" cellpadding="5" cellspacing="1" border="0" class="preoutline"><tr class="preinline"><td> <pre class="screen">mkdir /tmp/workingiso
mount -t iso9660 -o loop dsl-3.0.iso /tmp/working.iso</pre> </td></tr></table></div></div></li><li><div class="listitem"> ISO'nun sýkýþtýrýlmýþ dosya sistemini açýn ve uygun bir dizine baðlayýn.
		<div class="screen" align="right"><table width="95%" cellpadding="5" cellspacing="1" border="0" class="preoutline"><tr class="preinline"><td> <pre class="screen">extract_compressed_fs /tmp/workingiso/KNOPPIX/KNOPPIX &gt; /var/tmp/KNOPPIX-cloop
mkdir /tmp/workingiso.cloop
mount -o loop /var/tmp/KNOPPIX-cloop /tmp/workingiso.cloop</pre> </td></tr></table></div></div></li><li><div class="listitem"> Artýk CD'nin iç bölümlerine de eriþebilir durumdasýnýz, onunla çalýþabileceðiniz bir yere kopyalayýn.
		<div class="orderedlist"><ol type="a"><li><div class="listitem"> Çalýþmak için bir dizin oluþturun (<tt>/home/meltem/Desktop/vpn-tree</tt> gibi)</div></li><li><div class="listitem"><b><tt>tar -C /tmp/workingiso.cloop -cf - . | tar -C /home/meltem/Desktop/vpn-tree -xvpf</tt></b> -</div></li></ol></div></div></li><li><div class="listitem"> CD'nin dýþ bölümünü de çalýþabileceðiniz bir dizine kopyalayýn.
			<div class="orderedlist"><ol type="a"><li><div class="listitem"> Çalýþmak için bir dizin oluþturun (<tt>/home/meltem/Desktop/vpn-cd-tree</tt> gibi)</div></li><li><div class="listitem"><b><tt>tar -C /tmp/workingiso -cf - . | tar -C /home/meltem/Desktop/vpn-cd-tree -xvpf -</tt></b></div></li></ol></div></div></li><li><div class="listitem"> Bu aþamaya kadar hatasýz gelip gelmediðinizi kontrol etmek için bir CD görüntüsü oluþturun.
		<div class="screen" align="right"><table width="95%" cellpadding="5" cellspacing="1" border="0" class="preoutline"><tr class="preinline"><td> <pre class="screen">mkisofs -pad -l -r -J -V "YOURVPN v0.1" -no-emul-boot -boot-load-size 4 -boot-info-table -b boot/isolinux/isolinux.bin -c boot/isolinux/boot.cat -hide-rr-moved  -o yourvpn.iso /home/meltem/Desktop/vpn-cd-tree/</pre> </td></tr></table></div></div></li><li><div class="listitem"> Yukarýdaki komut hatasýz sonuçlanýnca oluþturduðunuz CD'yi test edin:
			<div class="orderedlist"><ol type="a"><li><div class="listitem"><b><tt>qemu -boot d -cdrom yourvpn.iso</tt></b></div></li></ol></div></div></li><li><div class="listitem"> Artýk deðiþiklik yapmaya baþlayabilirsiniz.
		<div class="orderedlist"><ol type="a"><li><div class="listitem"> Aþaðýdaki komutla proc dizinini baðlayýn:
		
		<p><b><tt>mount -t proc none /home/meltem/Desktop/vpn-tree/proc</tt></b></p><p></p></div></li><li><div class="listitem"><b><tt>chroot /home/meltem/Desktop/vpn-tree</tt></b></div></li><li><div class="listitem"> Dosya sisteminde istediðiniz deðiþiklikleri yapýn.</div></li></ol></div></div></li><li><div class="listitem"> Etrafta biraz dolaþtýktan sonra yeni sýkýþtýrýlmýþ dosya görüntümüzü yazmanýn ve CD oluþturmanýn zamaný geldi.
			<div class="orderedlist"><ol type="a"><li><div class="listitem"> chroot'dan çýkýn</div></li><li><div class="listitem"> Yukarýda baðladýðýnýz proc dizinini çözün (bu aþamayý unutursanýz çalýþan bir CD oluþturamazsýnýz)</div></li><li><div class="listitem"> Sýkýþtýrýlmýþ dosya görüntüsünü oluþturun
		
		<div class="screen" align="right"><table width="95%" cellpadding="5" cellspacing="1" border="0" class="preoutline"><tr class="preinline"><td> <pre class="screen">mkisofs -L -R -l -V "YOURVPN ISO9660" -v -allow-multidot /home/meltem/Desktop/vpn-tree/ | create_compressed_fs - 65536 &gt; /home/meltem/Desktop/vpn-cd-tree/KNOPPIX/KNOPPIX </pre> </td></tr></table></div></div></li><li><div class="listitem"> CD görüntüsünü oluþturun
		
		<div class="screen" align="right"><table width="95%" cellpadding="5" cellspacing="1" border="0" class="preoutline"><tr class="preinline"><td> <pre class="screen">mkisofs -pad -l -r -J -V "YOURVPN v0.2" -no-emul-boot -boot-load-size 4 -boot-info-table -b boot/isolinux/isolinux.bin -c boot/isolinux/boot.cat -hide-rr-moved -o yourvpn.iso /home/meltem/Desktop/vpn-cd-tree/</pre> </td></tr></table></div></div></li><li><div class="listitem"> Bir emülatör kullanarak test edin (Ben qemu'yu tercih ediyorum ama isterseniz vmware, xen veya baþkasýný kullanabilirsiniz)
		
		<p><b><tt>qemu -boot d -cdrom yourvpn.iso</tt></b></p><p></p></div></li></ol></div></div></li><li><div class="listitem"> Gerekli ISO dosyasýný oluþturana kadar bu adýmlarý tekrar edin.</div></li><li><div class="listitem"> CD görüntüsünü yazýn ve kullanýn.</div></li></ol></div>
	</p></dd></div></dl><dl><div class="sect2"><dt><div> <h3 class="title"><a name="secure-boot-cd-implementation-modifying-cd"></a>CD'deki yazýlýmlarýn düzenlenmesiyle ilgili açýklamalar</h3></div></dt><dd><p><div class="orderedlist"><ol type="1"><li><div class="listitem"> Chroot yaptýktan sonra openvpn*.deb dosyasýný kök dosya sistemine açýn<sup>[<a name="id2" href="#ftn.id2">40</a>]</sup></div></li><li><div class="listitem"> Gerekli bütün kütüphanelerin uygun yerlere kopyalandýðýndan emin olun.
		<div class="orderedlist"><ol type="a"><li><div class="listitem"><b><tt>chroot</tt></b></div></li><li><div class="listitem"><b><tt>ldd /usr/sbin/openvpn</tt></b></div></li><li><div class="listitem"> Ana sistemin baþka bir terminaline geçerek gerekli kütüphaneleri ana sistemden <tt>vpn-tree</tt> dizininde uygun yerlere kopyalayýn</div></li><li><div class="listitem"> tun düðümünü oluþturun: <b><tt>mknod /dev/net/tun c 10 200</tt></b></div></li></ol></div></div></li><li><div class="listitem"><tt>vpn-cd-tree/boot/isolinux/boot.msg</tt> dosyasýndan "^Xlogo.16" ile baþlayan satýrý silin.</div></li><li><div class="listitem"> Açýlýþta boot seçenekleri için beklenilmemesi için <tt>vpn-cd-tree/boot/isolinux/isolinux.cfg</tt> dosyasýný düzenleyerek "PROMPT 1" yerine "PROMPT 0" yazýn.</div></li><li><div class="listitem"><tt>vpn-tree/etc/skel/.xinitrc</tt> dosyasýný düzenleyerek masaüstünde olmasýný istediklerimizi yansýtýn. Masaüstüne ikonlarýn yüklenmesini saðlayan ve pencereleri yükleyen kodlarý kaldýrýn, VPN baðlantýsý için gerekli kodu ekleyin ve son olarak rdesktop'u yükleyen ve doðru makineye baðlantý yapýlmasýný saðlayan kodu ekleyin.</div></li><li><div class="listitem"> Açýlýþ ekranýný aþaðýdaki adýmlarla deðiþtirin.
		<div class="orderedlist"><ol type="a"><li><div class="listitem"><tt>vpn-cd-tree/boot/isolinux/minirt24.gz</tt> dosyasýný <tt>/tmp</tt> dizinine kopyalayýn,</div></li><li><div class="listitem"><b><tt>gunzip minirt24.gz</tt></b></div></li><li><div class="listitem"><b><tt>mount -o loop minirt24 /mnt</tt></b></div></li><li><div class="listitem"><tt>/etc/linuxrc</tt> dosyasýný düzenleyerek "DSL" yerine istediðiniz logoyu koyun</div></li><li><div class="listitem"><b><tt>umount /mnt</tt></b></div></li><li><div class="listitem"><b><tt>gzip minirt24</tt></b></div></li><li><div class="listitem"><tt>minirt24.gz</tt> dosyasýný <tt>vpn-cd-tree/boot/isolinux/minirt24.gz</tt> olarak kopyalayýn.</div></li></ol></div></div></li></ol></div>
	</p></dd></div></dl><dl><div class="sect2"><dt><div> <h3 class="title"><a name="secure-boot-cd-implementation-setting-up"></a>Çok kullanýcýlý OpenVPN sunucusunun yapýlandýrýlmasý</h3></div></dt><dd><p>  <div class="orderedlist"><ol type="1"><li><div class="listitem"> Sunucu için cert ve keys dosyalarýný oluþturmak için yönergeleri takip edin.</div></li><li><div class="listitem"> OPenVPN NASIL dosyasýnda anlatýlan bazý bilgileri girmeniz gerekecektir.</div></li><li><div class="listitem"> Ýstemciler için parola-korumalý anahtar üretmeyi unutmayýn.</div></li><li><div class="listitem"> Gerekli tüm yapýlandýrmalarý yapýn.</div></li><li><div class="listitem"> Her bir istemci için aþaðýdakileri yapmalýsýnýz:
		<div class="orderedlist"><ol type="a"><li><div class="listitem"> Sertifikayý kullanarak parola korumalý bir anahtar oluþturun,</div></li><li><div class="listitem"> Sertifikayý ve istemci anahtarýný (sadece) <tt>vpn-tree/etc/openvpn/keys</tt> dizinine yerleþtirin,</div></li><li><div class="listitem"><tt>vpn-tree/etc/openvpn/openvpn.cfg</tt> dosyasýný düzenleyerek gerekli anahtar dosyalarýn yollarýný belirtin (Örnekler bölümündeki sunucu yapýlandýrmasýna bakýnýz),</div></li><li><div class="listitem"><tt>vpn-tree/opt/bootlocal.sh</tt> dosyasýnda eklenen rotalarý düzenleyin,</div></li><li><div class="listitem"><tt>vpn-tree/etc/skel/.xinitrc</tt> dosyasýna rdesktop ile baðlanýlacak bilgisayarýn IP adresini yazýn.</div></li></ol></div></div></li><li><div class="listitem"> Yeniden CD oluþturun.</div></li><li><div class="listitem"> Emülatör ile test edin.</div></li><li><div class="listitem"> Çalýþtýðýný gördükten sonra; ISO dosyasýný CD'ye yazabileceðiniz gibi, isterseniz ISO dosyasýný <tt>win-qemu-yourvpn-cd</tt> dizinine kopyalayarak qemu Windows emülatör sürümünü oluþturup daha sonra ISO dosyasýný oluþturup CD'ye yazabilirsiniz.</div></li></ol></div>
	</p></dd></div></dl><dl><div class="sect2"><dt><div> <h3 class="title"><a name="secure-boot-cd-implementation-references"></a>Referanslar</h3></div></dt><dd><p>  <div class="orderedlist"><ol type="1"><li><div class="listitem"><a href="http://www.linuxjournal.com/article/7246" target="_top">http://www.linuxjournal.com/article/7246</a></div></li><li><div class="listitem"><a href="http://openvpn.net/howto.html" target="_top">http://openvpn.net/howto.html</a></div></li><li><div class="listitem"><a href="http://www.damnsmalllinux.org" target="_top">http://www.damnsmalllinux.org</a></div></li><li><div class="listitem"><a href="http://www.ubuntu.com" target="_top">http://www.ubuntu.com</a></div></li></ol></div>
	</p></dd></div></dl><div class="footnotes"><br><hr width="100" align="left"><table width="100%" summary="Footnotes" cellspacing="3" cellpading="1" class="footnote"><tr><td bgcolor="white" class="footoutline"><table width="100%" cellpadding="3" cellspacing="0" border="0"><tr><td bgcolor="white" class="footinline"><p><sup>[<a name="ftn.id1" href="#id1">38</a>] </sup>Ç.N. Biz kurulumu debian ile problemsiz yaptýk.</p></td></tr></table></td></tr></table><table width="100%" summary="Footnotes" cellspacing="3" cellpading="1" class="footnote"><tr><td bgcolor="white" class="footoutline"><table width="100%" cellpadding="3" cellspacing="0" border="0"><tr><td bgcolor="white" class="footinline"><p><sup>[<a name="ftn.id1" href="#id1">39</a>] </sup>Ç.N. Biz 4.3.3'ü problemsiz kullandýk.</p></td></tr></table></td></tr></table><table width="100%" summary="Footnotes" cellspacing="3" cellpading="1" class="footnote"><tr><td bgcolor="white" class="footoutline"><table width="100%" cellpadding="3" cellspacing="0" border="0"><tr><td bgcolor="white" class="footinline"><p><sup>[<a name="ftn.id2" href="#id2">40</a>] </sup>Ç.N. Bu iþlem için önce openvpn'in uygun paketini internetten indirmelisiniz ardýndan da dpkg komutunu kullanmanýz gerekiyor ama bunun için önce <b><tt>dpkg-rebuild</tt></b> komutunu çalýþtýrmanýz gerekiyor. Daha sonra <b><tt>dpkg --unpack openvpn*.deb</tt></b> komutunu çalýþtýrmalýsýnýz.</p></td></tr></table></td></tr></table></div></dd></div></dl><h1></h1><table width="100%" summary="Navigation header" cellpadding="1" cellspacing="0" border="0"><tr><td bgcolor="black" class="navoutline"><table width="100%" cellpadding="0" cellspacing="0" border="0"><tr><td bgcolor="white" class="navinline"><table width="100%" cellpadding="3" cellspacing="0" border="0"><tr><td width="40%" align="left"><a accesskey="p" href="../howto/secure-boot-cd-technologies.html">Önceki</a> </td><td width="20%" align="center"><a accesskey="u" href="../howto/secure-boot-cd-howto.html">Üst Ana Baþlýk</a></td><td width="40%" align="right"> <a accesskey="n" href="../howto/secure-boot-cd-maintenance.html">Sonraki</a></td></tr><tr><td width="40%" align="left" valign="top">Teknolojiler </td><td width="20%" align="center"><a accesskey="h" href="../KiTAPLIK/index.html">Baþlangýç</a></td><td width="40%" align="right" valign="top"> Bakým</td></tr><tr><td colspan="3" align="center">
                  Bir <a href="http://www.belgeler.org/">Linux Kitaplýðý</a> Sayfasý
                </td></tr></table></td></tr></table></td></tr></table></body></html>
