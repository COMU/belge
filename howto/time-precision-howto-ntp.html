<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-9"><meta name="date" content="2008-10-06T11:39:07+03:00"><title>Doðru Küresel Zaman Eþzamanlamasý</title><link rel="icon" type="image/png" href="../images/belgeler-logo.png"><link rel="stylesheet" href="../belgeler.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V-special(derived from 1.49 for Turkish Linux Documentation WG by Nilgün Belma Bugüner - nilgun@superonline.com)"><link rel="home" href="../KiTAPLIK/index.html" title="Linux Kitaplýðý"><link rel="up" href="../howto/time-precision-howto.html" title="Kesin Tarih ve Zaman Yönetimi"><link rel="previous" href="../howto/time-precision-howto-set.html" title="Linux Makinanýz için Doðru Ayarlar"><link rel="next" href="../howto/time-precision-howto-ntp.chrony.html" title="chrony  programýyla Kesin Zaman"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><table width="100%" summary="Navigation header" cellpadding="1" cellspacing="0" border="0"><tr><td bgcolor="black" class="navoutline"><table width="100%" cellpadding="0" cellspacing="0" border="0"><tr><td bgcolor="white" class="navinline"><table width="100%" cellpadding="3" cellspacing="0" border="0"><tr><th colspan="3" align="center">Doðru Küresel Zaman Eþzamanlamasý</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="../howto/time-precision-howto-set.html">Önceki</a> </td><th width="60%" align="center">Kesin Tarih ve Zaman Yönetimi</th><td width="20%" align="right"> <a accesskey="n" href="../howto/time-precision-howto-ntp.chrony.html">Sonraki</a></td></tr></table></td></tr></table></td></tr></table><dl><div class="sect1"><dt><div> <h2 class="title" style="clear: both"><a name="time-precision-howto-ntp"></a>Doðru Küresel Zaman Eþzamanlamasý</h2></div></dt><dd><p>
Tüm sisteminizde kesin zamana sahip olmak katý að güvenliði stratejisine (basit bir güvenlik duvarý kutusundan daha fazlasýyla elde edilir) sahip olmak kadar önemlidir.  Bu, iyi bir sistem yönetiminin birincil bileþenlerinden biridir ve organizasyonun ve güvenliðin baþýnda gelir. Özellikle daðýtýk uygulamalarýn yönetiminde, internet servislerinde ve hatta daðýtýk güvenlik aracýnda kesin zaman gereklidir.
</p><dl><div class="sect2"><dt><div> <h3 class="title"><a name="time-precision-howto-ntp.ntp"></a>NTP: Að Zaman Protokolü</h3></div></dt><dd><p>
Burada protokolü incelemeyeceðiz, fakat bu harika buluþun Internete nasýl bir yaygýnlýk kazandýrdýðý bizim iþimize yarayacak. Daha fazlasýný <a href="http://www.ntp.org/" target="_top">http://www.ntp.org/</a> adresinde bulabilirsiniz.
</p><p>
Bir kez sisteminiz uygun bir þekilde kurulduðunda, NTP, çalýþan uygulamalarý etkilememek için ufak ayarlamalar yaparak zamanýn doðru olmasýný saðlar.
</p><p>
Kesin zaman atomlarýn elektron frekanslarýný temel alan donaným saatinden elde edilebilir. Ayrýca  GPS (Küresel Konumlandýrma Sistemi) tabanlý yöntemler de mevcuttur. Birincisi daha kesindir fakat ikincisi de oldukça iyidir. Atomik saatler çok özel ve pahalý ekipmanlar gerektirir, fakat geliþtiricileri (genellikle üniversiteler ve araþtýrma labarotuvarlarý) onlarý NTP çalýþtýran bilgisayarlara baðlarlar ve sonuçta onlarý ücretsiz olarak kullanmamýza izin verirler. Sistemimizi bu þekilde eþzamanlarýz.
</p></dd></div></dl><dl><div class="sect2"><dt><div> <h3 class="title"><a name="time-precision-howto-ntp.arch"></a>Basit bir Eþzamanlama Mimarisi Oluþturmak</h3></div></dt><dd><p>Þunlara ihtiyacýnýz olacak:
</p><p><div class="orderedlist"><ol type="1"><li><div class="listitem">
Ýnternet'e doðrudan veya dolaylý (güvenlik duvarý üzerinden) baðlantý.
  <p></p><p></p></div></li><li><div class="listitem">
NTP sunucularý seçin. Kamuya açýk <a href="http://www.fortytwo.ch/time/" target="_top">pool.ntp.org</a> sunucusunu kullanabilirsiniz veya NTP sitesindeki <a href="http://www.eecis.udel.edu/~mills/ntp/clock2a.html" target="_top">katman 2 kamuya açýk zaman sunucularýndan</a> birini seçebilirsiniz. Eðer Ýnternet eriþiminiz yoksa, WAN yöneticiniz (zeki biri olmalý) size bazý dahili adresler saðlayabilir.
  <p></p><p></p></div></li><li><div class="listitem">
Eþzamanlamak istediðiniz tüm sistemler için NTP paketiniz olsun. Gözde Linux daðýtýmýnýzýn CDsinde RPM olarak bulabilirsiniz veya <a href="http://rpmfind.net/" target="_top">rpmfind.net</a>'de <a href="http://rpmfind.net/linux/rpm2html/search.php?query=ntp" target="_top">arama yapýn</a>.
<p></p><p></p></div></li></ol></div>
</p><p>
Güzel bir mimari örneði:
</p><p>
<div class="figure"><p><b>Þekil 2.1. NTP sunucu için Yerel Nakil Sunucu</b></p><p><img src="images/time-precision/ntp.png" align="center"></p></div>
</p><p>
Eðer eþzamanlanacak bir çok makinanýz varsa hepsini seçtiðiniz uzak NTP sunucuya <i>yönlendirmeyin</i>.  Sunucularýnýzdan sadece ikisi uzak  NTP sunucuya eriþmeli, ve diðerleri bu ikisiyle eþitlenmeli.  Bunlara <i>Nakil Sunucularý</i> diyeceðiz.
</p><p>
Nakil sunucunuz aðda ulaþýlabilen herhangi bir makina olabilir. NTP düþük bellek ve iþlemci harcar. Bunun için bu iþe adanmýþ bir makinaya gerek yoktur.
</p><p><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0"><tr><td rowspan="2" align="center" valign="top" width="25"><img src="../images/xsl/tip.png"></td><th>Ýpucu</th></tr><tr><td colspan="2" align="left" valign="top"><p>
Yerel Nakil Sunucunuz için ntp1.my.com ve ntp2.my.com gibi bir mahlas oluþturmak iyi bir fikirdir. Ýstemci makinalarý yapýlandýrýrken yalnýzca bu isimleri kullanýn. Bu yolla NTP iþlevselliðini farklý bir Nakil Sunucuya (farklý IP ve konak ismiyle) istemcileri yeniden yapýlandýrmadan taþýyabilirsiniz. Bu tür mahlaslar oluþturmak için DNS yöneticisine baþvurun.
</p></td></tr></table></div>
</p></dd></div></dl><dl><div class="sect2"><dt><div> <h3 class="title"><a name="time-precision-howto-ntp.configs"></a>NTP Yapýlandýrmasý</h3></div></dt><dd><div class="variablelist"><dl><dt><span class="term"><i>Nakil Sunucunuz için</i></span></dt><dd>
<tt>/etc/ntp.conf</tt> dosyasýný düzenleyin ve seçtiðiniz uzak sunucularý ekleyin:
<p></p><div class="example"><p><b>Örnek 2.19. Nakil sunucunun <tt>/etc/ntp.conf</tt> dosyasý</b></p><div class="programlisting" align="right"><table width="95%" cellpadding="5" cellspacing="1" border="0" class="preoutline"><tr class="preinline"><td> <pre class="programlisting">
..
server  otherntp.server.org     # server.org'daki bir katman 1 sunucu
server  ntp.research.gov        # research.gov'daki bir katman 2 sunucu
..
</pre> </td></tr></table></div></div><p>
Yine <a href="http://www.fortytwo.ch/time/" target="_top">pool.ntp.org</a> kamu sunucusunu kullanabilirsiniz, veya NTP sitesindeki <a href="http://www..eecis.udel.edu/~mills/ntp/clock2a.html" target="_top">katman 2 kamuya açýk zaman sunucularý</a>nýn listesini alabilirsiniz.
  </p><p></p></dd><dt><span class="term"><i>Ýstemcileriniz için</i></span></dt><dd>
<tt>/etc/ntp.conf</tt> dosyasýný düzenleyin ve Nakil Sunucularýnýzý standart ismiyle ekleyin:
<p></p><p>
<div class="example"><p><b>Örnek 2.20. Ýstemci makinanýn <tt>/etc/ntp.conf</tt> dosyasý</b></p><div class="programlisting" align="right"><table width="95%" cellpadding="5" cellspacing="1" border="0" class="preoutline"><tr class="preinline"><td> <pre class="programlisting">
..
server  ntp1.my.com             # Ýlk yerel Nakil Sunucum
server  ntp2.my.com             # Ýkinci yerel Nakil Sunucum
..
..</pre> </td></tr></table></div></div>
    </p><p></p></dd></dl></div><p>
Makinanýzýn NTP sunucularýyla karþýlaþtýrýldýðýnda birkaç dakikadan daha büyük farklýlýk gösteren UTC'ye sahipse NTP çalýþmayacaktýr. Bu yüzden önce tam eþleme yapmalýsýnýz ve bunu yoðun olmayan zamanda yapmanýzý tavsiye ederim. Bu sadece ilk NTP kurulumu sýrasýnda gereklidir. Bir daha yapmanýza gerek yoktur:
</p><div class="example"><p><b>Örnek 2.21. Ýlk eþzamanlama</b></p><p>
<div class="screen" align="right"><table width="95%" cellpadding="5" cellspacing="1" border="0" class="preoutline"><tr class="preinline"><td> <pre class="screen"><tt>bash# </tt><b><tt>ntpdate otherntp.research.gov</tt></b> <a name="time-precision-howto-sync1"></a><img src="../images/xsl/callouts/1.png" alt="1" border="0">
24 Mar 18:16:36 ntpdate[10254]: step time server 200.100.20.10 offset -15.266188 sec
<tt>bash# </tt><b><tt>ntpdate otherntp.research.gov</tt></b> <a name="time-precision-howto-sync2"></a><img src="../images/xsl/callouts/2.png" alt="2" border="0">
24 Mar 18:16:43 ntpdate[10255]: adjust time server 200.100.20.10 offset -0.000267 sec
</pre> </td></tr></table></div>
</p><p>
  <div class="calloutlist"><table border="0" summary="Callout list" cellspacing="0" cellpadding="3" width="100%"><tr><td width="5%" valign="top" align="left" class="coimage"><a href="#time-precision-howto-sync1"><img src="../images/xsl/callouts/1.png" alt="1" border="0"></a> </td><td valign="top" align="left"><p>
Ýlk tam eþzamanlama. 15 saniye gerideyiz.
  </p></td></tr><tr><td width="5%" valign="top" align="left" class="coimage"><a href="#time-precision-howto-sync2"><img src="../images/xsl/callouts/2.png" alt="2" border="0"></a> </td><td valign="top" align="left"><p>
Ýkinci tam eþzamanlama sadece emin olmak için.  Þimdi tam olarak 0 saniye fark var.
  </p></td></tr></table></div>
</p></div><p>
Son adým her iki makinada da NTP'yi yeniden baþlatmak:
</p><p>
<div class="screen" align="right"><table width="95%" cellpadding="5" cellspacing="1" border="0" class="preoutline"><tr class="preinline"><td> <pre class="screen"><tt>bash# </tt><b><tt>service ntpd restart</tt></b>
</pre> </td></tr></table></div>
</p></dd></div></dl><dl><div class="sect2"><dt><div> <h3 class="title"><a name="time-precision-howto-ntp.watch"></a>Makinanýzýn eþzamanlanmasýný izlemek</h3></div></dt><dd><p>
Þimdi herþey kurulmuþ durumda. NTP yumuþak bir biçimde makinanýzý eþzamanlý tutacak. Bu iþlemi NTP Sorgusu (<b><tt>ntpq</tt></b> komutu) kullanarak izleyebilirsiniz:
</p><div class="example"><p><b>Örnek 2.22. Örnek bir eþzamanlama durumu</b></p><p>
<div class="screen" align="right"><table width="95%" cellpadding="5" cellspacing="1" border="0" class="preoutline"><tr class="preinline"><td> <pre class="screen"><tt>bash# </tt><b><tt>ntpq -p</tt></b>
     remote           refid      st t when poll reach   delay   offset  jitter
==============================================================================
-jj.cs.umb.edu   gandalf.sigmaso  3 u   95 1024  377   31.681  -18.549   1.572
 milo.mcs.anl.go ntp0.mcs.anl.go  2 u  818 1024  125   41.993  -15.264   1.392
-mailer1.psc.edu ntp1.usno.navy.  2 u  972 1024  377   38.206   19.589  28.028
-dr-zaius.cs.wis ben.cs.wisc.edu  2 u  502 1024  357   55.098    3.979   0.333
+taylor.cs.wisc. ben.cs.wisc.edu  2 u  454 1024  347   54.127    3.379   0.047
-ntp0.cis.strath harris.cc.strat  3 u  507 1024  377  115.274   -5.025   1.642
*clock.via.net   .GPS.            1 u  426 1024  377  107.424   -3.018   2.534
 ntp1.conectiv.c 0.0.0.0         16 u    - 1024    0    0.000    0.000 4000..00
+bonehed.lcs.mit .GPS.            1 u  984 1024  377   25.126    0.131  30.939
-world.std.com   204.34.198.40    2 u  119 1024  377   24.229   -6.884   0.421
</pre> </td></tr></table></div></p></div><p>Sütunlarýn Anlamlarý:</p><p>
<div class="variablelist"><dl><dt><span class="term"><i>remote</i></span></dt><dd>
Uzak  NTP Sunucunun ismi. <tt>-n</tt> seçeneðini kullanýrsanýz sunucunun konak-ismi yerine IP adresini göreceksiniz.
 <p></p><p></p></dd><dt><span class="term"><i>refid</i></span></dt><dd>
Her sunucunun kendi zamanýný nereden aldýðýný gösterir. Bu konak-ismi veya Küresel Konumlama Sistemi kaynaðý .GPS. benzeri birþey olabilir.
  <p></p><p></p></dd><dt><span class="term"><i>st</i></span></dt><dd>
<i>Katman</i> uzak sunucunun önceliðini gösteren 1'den 16'ya kadar bir rakamdýr.
1 en kesin, 16 'sunucu ulaþýlamaz' anlamýndadýr. Sizin katmanýnýz kesin uzak sunucunuzun bir fazlasý olmalýdýr. Asla katman 1 sunuculara baðlanmayýn, katman 2'leri kullanýn! Katman 2 sunucularýn amacýmýza uygun olmasýnýn yanýnda, bu tutum Katman 1 sunucular üzerindeki trafiði düþürdüðü için de
iyidir.
  <p></p><p></p></dd><dt><span class="term"><i>poll</i></span></dt><dd>
Zaman istekleri arasýndaki oylama zamaný (saniyelerle).  Deðer, izin verilen en az ve en çok oylama deðerleri aralýðýndadýr. Ýlk olarak deðer eþzamanlamanýn daha hýzlý olmasýný saðlamak için küçüktür. Saatler eþzamanlý olduktan sonra oylama deðeri að trafiðini ve zaman sunucudaki yükü azaltmak için artar.
  <p></p><p></p></dd><dt><span class="term"><i>reach</i></span></dt><dd>
Bu, 8 bit bir dizinin sekizlik gösterimidir. Bu sayý yerel makinanýn sunucuya son 8 denemesini gösterir. Uzak sunucu eriþildiyse bit 1 olur.
  <p></p><p></p></dd><dt><span class="term"><i>delay</i></span></dt><dd>
"saat kaç" isteðine cevap verilmesi için gereken zaman miktarýdýr (saniyeler).
  <p></p><p></p></dd><dt><span class="term"><i>offset</i></span></dt><dd>
En önemli deðer. Yerel ve uzak sunucu arasýndaki zaman farký. Eþzamanlama durumunda bu fark azalýr ve bu da makinanýn zamanýnýn daha doðru olduðu anlamýna gelir.
  <p></p><p></p></dd><dt><span class="term"><i>jitter</i></span></dt><dd>
Daðýlým -veya salýným da denir- birçok ardýþýk istek/cevap çiftleri farkýnýn sapmasýnýn istatistiksel bir ölçüsüdür. Küçük daðýlým deðerleri büyük daðýlým deðerlerine tercih edilir. Küçük daðýlým deðerleri daha doðru bir eþzamanlama yapýlmasýna izin verir.
  <p></p><p></p></dd></dl></div>
  </p><p>Konak-isminden önceki iþaretleri anlamlarý:</p><p>
<div class="variablelist"><dl><dt><span class="term"><i>-</i></span></dt><dd>
Yerel NTP servisinin bu sunucuyla pek uyuþmadýðýný gösterir.
  <p></p><p></p></dd><dt><span class="term"><i>+</i></span></dt><dd>
Yerel NTP servisinin bu sunucuyla uyuþtuðunu gösterir.
  <p></p><p></p></dd><dt><span class="term"><i>x</i></span></dt><dd>
Kötü bir konaða iþaret eder.
  <p></p><p></p></dd><dt><span class="term"><i>*</i></span></dt><dd>
Geçerli gözdeyi gösterir.
  <p></p><p></p></dd></dl></div></p></dd></div></dl><dl><div class="sect2"><dt><div> <h3 class="title"><a name="time-precision-howto-ntp.boot"></a>NTP'nin Açýlýþta Otomatik Çalýþmasý için Yapýlandýrýlmasý</h3></div></dt><dd><p>
Her zaman, bilgisayar yeniden baþlatýldýðýnda bile çalýþan bir NTP kullanmak isteyebilirsiniz. Her makinada þunu yapýn:
</p><p>
<div class="screen" align="right"><table width="95%" cellpadding="5" cellspacing="1" border="0" class="preoutline"><tr class="preinline"><td> <pre class="screen"><tt>bash# </tt><b><tt>chkconfig --level 2345 ntpd on</tt></b>
</pre> </td></tr></table></div>
</p><p>
Bu otomatik baþlatmayý saðlar.
</p><p>
Eðer makinanýnýz uzun süre (aylar, yýllar) yeniden baþlatýlmadan çalýþýyorsa, doðru olmayan donaným saati ve sistem saati (artýk oldukça doðru) arasýnda büyük tutarsýzlýklar göreceksiniz. Modern Linux daðýtýmlarý sistemin her kapanýþýnda sistem saatini donaným saatine <a href="../howto/time-precision-howto-set.html#time-precision-howto-set.hwclock" title="Donaným Saatinin Ayarlanmasý"><b><tt>setclock</tt></b> komutuna benzer bir mekanizmayla</a> kopyalar. Bu yolla bir sonraki Ýþletim Sistemi açýlýþýnda neredeyse kapattýðýnýz zamanki kadar doðru bir zaman elde edersiniz.
</p></dd></div></dl></dd></div></dl><h1></h1><table width="100%" summary="Navigation header" cellpadding="1" cellspacing="0" border="0"><tr><td bgcolor="black" class="navoutline"><table width="100%" cellpadding="0" cellspacing="0" border="0"><tr><td bgcolor="white" class="navinline"><table width="100%" cellpadding="3" cellspacing="0" border="0"><tr><td width="40%" align="left"><a accesskey="p" href="../howto/time-precision-howto-set.html">Önceki</a> </td><td width="20%" align="center"><a accesskey="u" href="../howto/time-precision-howto.html">Üst Ana Baþlýk</a></td><td width="40%" align="right"> <a accesskey="n" href="../howto/time-precision-howto-ntp.chrony.html">Sonraki</a></td></tr><tr><td width="40%" align="left" valign="top">Linux Makinanýz için Doðru Ayarlar </td><td width="20%" align="center"><a accesskey="h" href="../KiTAPLIK/index.html">Baþlangýç</a></td><td width="40%" align="right" valign="top"> chrony  programýyla Kesin Zaman</td></tr><tr><td colspan="3" align="center">
                  Bir <a href="http://www.belgeler.org/">Linux Kitaplýðý</a> Sayfasý
                </td></tr></table></td></tr></table></td></tr></table></body></html>
