<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-9"><meta name="date" content="2006-04-25T01:54:23+03:00"><title>Panelleri Hareket Ettirmek ve Boyutlandýrmak</title><link rel="icon" type="image/png" href="../images/belgeler-logo.png"><link rel="stylesheet" href="../belgeler.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V-special(derived from 1.49 for Turkish Linux Documentation WG by Nilgün Belma Bugüner - nilgun@superonline.com)"><link rel="home" href="../KiTAPLIK/index.html" title="Linux Kitaplýðý"><link rel="up" href="../howto/ncurses-howto-panels.html" title="Panel Kütüphanesi"><link rel="previous" href="../howto/ncurses-howto-userptrusing.html" title="Kullanýcý Ýþaretçilerini Kullanmak"><link rel="next" href="../howto/ncurses-howto-panelshowhide.html" title="Panelleri Gizlemek ve Göstermek"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><table width="100%" summary="Navigation header" cellpadding="1" cellspacing="0" border="0"><tr><td bgcolor="black" class="navoutline"><table width="100%" cellpadding="0" cellspacing="0" border="0"><tr><td bgcolor="white" class="navinline"><table width="100%" cellpadding="3" cellspacing="0" border="0"><tr><th colspan="3" align="center">Panelleri Hareket Ettirmek ve Boyutlandýrmak</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="../howto/ncurses-howto-userptrusing.html">Önceki</a> </td><th width="60%" align="center">Panel Kütüphanesi</th><td width="20%" align="right"> <a accesskey="n" href="../howto/ncurses-howto-panelshowhide.html">Sonraki</a></td></tr></table></td></tr></table></td></tr></table><dl><div class="sect2"><dt><div> <h3 class="title"><a name="ncurses-howto-panelmoveresize"></a>Panelleri Hareket Ettirmek ve Boyutlandýrmak</h3></div></dt><dd><p>
<b><tt>move_panel()</tt></b> iþlevi paneli istenen konuma taþýmak için kullanýlabilir. Panelin yýðýn içerisindeki konumunu deðiþtirmez. Panele baðlý pencereler üzerinde <tt>mvwin()</tt> yerine <tt>move_panel()</tt> kullandýðýnýzdan emin olun.
</p><p>
Bir paneli yeniden boyutlandýrmak biraz karmaþýktýr. Doðrudan bu iþi yapacak bir iþlev yoktur. Bir paneli yeniden boyutlandýrmanýn yolu istenen boyutlarda bir pencere oluþturmak ve <tt>replace_panel()</tt> ile boyutu deðiþtirilmek istenen pencereyi deðiþtirmektir. Eski pencereyi silmeyi unutmayýn. Bir panele baðlý pencere <tt>panel_window()</tt> ile bulunabilir.
</p><p>
Aþaðýdaki program bahsedilenleri basit bir þekilde göstermektedir. Her zamanki gibi pencereler üzerinde sekme tuþu ile hareket edebilirsiniz. Etkin paneli yeniden boyutlandýrmak için 'r''ye taþýmak için 'm''ye basýn. Daha sonra ok tuþlarý ile taþýma ve boyutlandýrmanýzý yapýn, bitince enter ile sonlandýrýn. Bu örnek kullanýcý bilgilerini kullanarak iþlemler yapmaktadýr.
</p><div class="example"><p><a name="ncurses-howto-ppare"></a><b>Örnek 5.21. Panel Taþýma ve Yeniden Boyutlandýrma Örneði</b></p><p>
<div class="programlisting" align="right"><table width="95%" cellpadding="5" cellspacing="1" border="0" class="preoutline"><tr class="preinline"><td> <pre class="programlisting">
#include &lt;panel.h&gt;

typedef struct _PANEL_DATA {
  int x, y, w, h;
  char label[80];
  int label_color;
  PANEL *next;
}PANEL_DATA;

#define NLINES 10
#define NCOLS 40

void init_wins(WINDOW **wins, int n);
void win_show(WINDOW *win, char *label, int label_color);
void print_in_middle(WINDOW *win, int starty, int startx, int width,
     char *string, chtype color);
void set_user_ptrs(PANEL **panels, int n);

int main()
{ WINDOW *my_wins[3];
  PANEL  *my_panels[3];
  PANEL_DATA  *top;
  PANEL *stack_top;
  WINDOW *temp_win, *old_win;
  int ch;
  int newx, newy, neww, newh;
  int size = FALSE, move = FALSE;

  /* Curses kipi ilklendirme */
  initscr();
  start_color();
  cbreak();
  noecho();
  keypad(stdscr, TRUE);

  /* Tüm renkleri ilklendir */
  init_pair(1, COLOR_RED, COLOR_BLACK);
  init_pair(2, COLOR_GREEN, COLOR_BLACK);
  init_pair(3, COLOR_BLUE, COLOR_BLACK);
  init_pair(4, COLOR_CYAN, COLOR_BLACK);

  init_wins(my_wins, 3);

  /* Her panele bir oencere ata */        /* Sýra aþaðýdan yukarýya */
  my_panels[0] = new_panel(my_wins[0]);   /* 0'a  it, sýra: stdscr-0 */
  my_panels[1] = new_panel(my_wins[1]);   /* 1'e  it, sýra: stdscr-0-1 */
  my_panels[2] = new_panel(my_wins[2]);   /* 2'ye it, sýra: stdscr-0-1-2 */

  set_user_ptrs(my_panels, 3);
  /* Yýðýn sýralamasýný güncelle. 2. panel en tepede olacak */
  update_panels();

  /* Ekrana göster */
  attron(COLOR_PAIR(4));
  mvprintw(LINES - 3, 0,
    "Taþýmak için 'm' , yeniden boyutlandýrma için 'r' kullanýn");
  mvprintw(LINES - 2, 0,
    "Pencereler arasýnda gezinmek için tab kullanýn (Çýkmak için F1)");
  attroff(COLOR_PAIR(4));
  doupdate();

  stack_top = my_panels[2];
  top = (PANEL_DATA *)panel_userptr(stack_top);
  newx = top-&gt;x;
  newy = top-&gt;y;
  neww = top-&gt;w;
  newh = top-&gt;h;
  while((ch = getch()) != KEY_F(1))
  { switch(ch)
    { case 9:         /* Tab */
        top = (PANEL_DATA *)panel_userptr(stack_top);
        top_panel(top-&gt;next);
        stack_top = top-&gt;next;
        top = (PANEL_DATA *)panel_userptr(stack_top);
        newx = top-&gt;x;
        newy = top-&gt;y;
        neww = top-&gt;w;
        newh = top-&gt;h;
        break;
      case 'r':       /* Yeniden boyutlandýr */
        size = TRUE;
        attron(COLOR_PAIR(4));
        mvprintw(LINES - 4, 0,
            "Yeniden boyutlandýrmaya giriþ: "
            "Ok tuþlarý ile boyutlandýrýn ve "
            "bitirmek için &lt;ENTER&gt; kullanýn");
        refresh();
        attroff(COLOR_PAIR(4));
        break;
      case 'm':       /* Move */
        attron(COLOR_PAIR(4));
        mvprintw(LINES - 4, 0,
          "Taþýma kipine girildi: "
          "Taþýmak için ok tuþlarýný ve "
          "bitirmek için &lt;ENTER&gt; kullanýn");
        refresh();
        attroff(COLOR_PAIR(4));
        move = TRUE;
        break;
      case KEY_LEFT:
        if(size == TRUE)
        { --newx;
          ++neww;
        }
        if(move == TRUE)
          --newx;
        break;
      case KEY_RIGHT:
        if(size == TRUE)
        { ++newx;
          --neww;
        }
        if(move == TRUE)
          ++newx;
        break;
      case KEY_UP:
        if(size == TRUE)
        { --newy;
          ++newh;
        }
        if(move == TRUE)
          --newy;
        break;
      case KEY_DOWN:
        if(size == TRUE)
        { ++newy;
          --newh;
        }
        if(move == TRUE)
          ++newy;
        break;
      case 10:        /* Enter */
        move(LINES - 4, 0);
        clrtoeol();
        refresh();
        if(size == TRUE)
        { old_win = panel_window(stack_top);
          temp_win = newwin(newh, neww, newy, newx);
          replace_panel(stack_top, temp_win);
          win_show(temp_win, top-&gt;label, top-&gt;label_color);
          delwin(old_win);
          size = FALSE;
        }
        if(move == TRUE)
        { move_panel(stack_top, newy, newx);
          move = FALSE;
        }
        break;
    }
    attron(COLOR_PAIR(4));
    mvprintw(LINES - 3, 0,
      "Taþýmak için 'm', yeniden boyutlandýrmak için 'r' kullanýn");
    mvprintw(LINES - 2, 0,
      "Pencereler arasýnda gezinti için tab kullanýn "
        "(Çýkmak için F1)");
    attroff(COLOR_PAIR(4));
    refresh();
    update_panels();
    doupdate();
  }
  endwin();
  return 0;
}

/* Tüm pencereleri yazdýr */
void init_wins(WINDOW **wins, int n)
{ int x, y, i;
  char label[80];

  y = 2;
  x = 10;
  for(i = 0; i &lt; n; ++i)
  { wins[i] = newwin(NLINES, NCOLS, y, x);
    sprintf(label, "Pencere Numarasý %d", i + 1);
    win_show(wins[i], label, i + 1);
    y += 3;
    x += 7;
  }
}

/* Herbir panel için PANEL_DATA veri yapýsýný tanýmla */
void set_user_ptrs(PANEL **panels, int n)
{ PANEL_DATA *ptrs;
  WINDOW *win;
  int x, y, w, h, i;
  char temp[80];

  ptrs = (PANEL_DATA *)calloc(n, sizeof(PANEL_DATA));

  for(i = 0;i &lt; n; ++i)
  { win = panel_window(panels[i]);
    getbegyx(win, y, x);
    getmaxyx(win, h, w);
    ptrs[i].x = x;
    ptrs[i].y = y;
    ptrs[i].w = w;
    ptrs[i].h = h;
    sprintf(temp, "Pencere Numarasý %d", i + 1);
    strcpy(ptrs[i].label, temp);
    ptrs[i].label_color = i + 1;
    if(i + 1 == n)
      ptrs[i].next = panels[0];
    else
      ptrs[i].next = panels[i + 1];
    set_panel_userptr(panels[i], &amp;ptrs[i]);
  }
}

/* Pencereyi bir çerçeve ve bir isimle göster */
void win_show(WINDOW *win, char *label, int label_color)
{ int startx, starty, height, width;

  getbegyx(win, starty, startx);
  getmaxyx(win, height, width);

  box(win, 0, 0);
  mvwaddch(win, 2, 0, ACS_LTEE);
  mvwhline(win, 2, 1, ACS_HLINE, width - 2);
  mvwaddch(win, 2, width - 1, ACS_RTEE);

  print_in_middle(win, 1, 0, width, label, COLOR_PAIR(label_color));
}

void print_in_middle(WINDOW *win, int starty, int startx, int width,
    char *string, chtype color)
{ int length, x, y;
  float temp;

  if(win == NULL)
    win = stdscr;
  getyx(win, y, x);
  if(startx != 0)
    x = startx;
  if(starty != 0)
    y = starty;
  if(width == 0)
    width = 80;

  length = strlen(string);
  temp = (width - length)/ 2;
  x = startx + (int)temp;
  wattron(win, color);
  mvwprintw(win, y, x, "%s", string);
  wattroff(win, color);
  refresh();
}
</pre> </td></tr></table></div></p></div><p>
Ana programdaki <b><tt>while</tt></b> döngüsüne dikkatinizi verin. Bir kere basýlan tuþun türünü buldu mu uygun davranýþý göstermektedir. Eðer 'r' basýldýysa yeniden boyutlandýrma baþlamaktadýr. Bundan sonra kullanýcý ok tuþlarýna bastýkça yeni boyutlarý güncellenmektedir. Kullanýcý &lt;ENTER&gt;'a bastýðý anda o anki seçim sona erer ve panel açýklanan mantýkla yeniden boyutlandýrýlýr. Yeniden boyutlandýrma kipinde program pencerenin nasýl yeniden boyutlandýrýldýðýný göstermez. Okuyucuya yeniden boyutlandýrma sýrasýnda noktalý bir çerçeve ile yeni boyutu gösterme iþi bir alýþtýrma olarak býrakýlmýþtýr.
</p><p>
Kullanýcý 'm''e bastýðýnda taþýma kipi baþlar. Bu, yeniden boyutlandýrmaktan daha kolaydýr. Ok tuþlarýna bastýkça yeni konum güncellenir ve &lt;ENTER&gt; ile <tt>move_panel()</tt> çaðrýlarak panel taþýma iþlemi sonlandýrýlýr.
</p><p>
Bu programda <tt>PANEL_DATA</tt> olarak ifade edilen kullanýcý bilgisi önemli bir rol oynamaktadýr. Açýklama satýrlarýnda da yazdýðý gibi <tt>PANEL_DATA</tt> panel boyutu, ismi, isim rengi ve sýralamadaki sonraki panele iþaretçi bilgilerini tutmaktadýr.
</p></dd></div></dl><h1></h1><table width="100%" summary="Navigation header" cellpadding="1" cellspacing="0" border="0"><tr><td bgcolor="black" class="navoutline"><table width="100%" cellpadding="0" cellspacing="0" border="0"><tr><td bgcolor="white" class="navinline"><table width="100%" cellpadding="3" cellspacing="0" border="0"><tr><td width="40%" align="left"><a accesskey="p" href="../howto/ncurses-howto-userptrusing.html">Önceki</a> </td><td width="20%" align="center"><a accesskey="u" href="../howto/ncurses-howto-panels.html">Üst Ana Baþlýk</a></td><td width="40%" align="right"> <a accesskey="n" href="../howto/ncurses-howto-panelshowhide.html">Sonraki</a></td></tr><tr><td width="40%" align="left" valign="top">Kullanýcý Ýþaretçilerini Kullanmak </td><td width="20%" align="center"><a accesskey="h" href="../KiTAPLIK/index.html">Baþlangýç</a></td><td width="40%" align="right" valign="top"> Panelleri Gizlemek ve Göstermek</td></tr><tr><td colspan="3" align="center">
                  Bir <a href="http://www.belgeler.org/">Linux Kitaplýðý</a> Sayfasý
                </td></tr></table></td></tr></table></td></tr></table></body></html>
