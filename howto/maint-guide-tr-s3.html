<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-9"><meta name="date" content="2006-04-25T01:53:17+03:00"><title>Kaynak paketinde deðiþiklik</title><link rel="icon" type="image/png" href="../images/belgeler-logo.png"><link rel="stylesheet" href="../belgeler.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V-special(derived from 1.49 for Turkish Linux Documentation WG by Nilgün Belma Bugüner - nilgun@superonline.com)"><link rel="home" href="../KiTAPLIK/index.html" title="Linux Kitaplýðý"><link rel="up" href="../howto/maint-guide-tr.html" title="Debian Paket Bakýmcýlarýnýn Kýlavuzu"><link rel="previous" href="../howto/maint-guide-tr-s2.4.html" title='Ýlk "debianlaþtýrma"'><link rel="next" href="../howto/maint-guide-tr-s3.1.html" title="Kütüphaneleri deðiþtirmek"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><table width="100%" summary="Navigation header" cellpadding="1" cellspacing="0" border="0"><tr><td bgcolor="black" class="navoutline"><table width="100%" cellpadding="0" cellspacing="0" border="0"><tr><td bgcolor="white" class="navinline"><table width="100%" cellpadding="3" cellspacing="0" border="0"><tr><th colspan="3" align="center">Kaynak paketinde deðiþiklik</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="../howto/maint-guide-tr-s2.4.html">Önceki</a> </td><th width="60%" align="center">Debian Paket Bakýmcýlarýnýn Kýlavuzu</th><td width="20%" align="right"> <a accesskey="n" href="../howto/maint-guide-tr-s3.1.html">Sonraki</a></td></tr></table></td></tr></table></td></tr></table><dl><div class="sect1"><dt><div> <h2 class="title" style="clear: both"><a name="maint-guide-tr-s3"></a>Kaynak paketinde deðiþiklik</h2></div></dt><dd><div class="toc"><p><b>Ýçindekiler</b></p><dl><dt>3.3.1. <a href="../howto/maint-guide-tr-s3.1.html">Kütüphaneleri deðiþtirmek</a></dt></dl></div><p>
Normal olarak programlar kendilerini <tt>/usr/local</tt> dizini altýndaki dizinlere yükler. Fakat, bu kýsým sistem yöneticilerinin (veya kullanýcýlarýn) özel kullanýmlarýna ayrýldýðý için, Debian paketleri bu dizini kullanmamalýdýr. Bu da paketin derlenme sistemine, genel olarak da Makefile ile baþlayarak bakmak demektir. Makefile, programýn derlenmesini ve kurulmasýný otomatikleþtirecek bir <b><tt>make(1)</tt></b> betiðidir. Makefile ile ilgili daha ayrýntýlý bilgi için <a href="../howto/maint-guide-tr-s4.4.html" class="xref" title="rules dosyasý"> rules dosyasý</a> bölümüne bakýnýz.
    </p><p>
Eðer programýnýz GNU <b><tt>automake(1)</tt></b> ve/veya <b><tt>autoconf(1)</tt></b> kullanýyorsa, ki bu da kaynak paketinin <tt>Makefile.am</tt> ve/veya <tt>Makefile.in</tt> dosyalarýný içermesi demektir, sýrasýyla, bu dosyalarý deðiþtirmeniz gerekir. Bunun sebebi, her bir <b><tt>automake</tt></b> çaðrýmýnýn  <tt>Makefile.am</tt> dosyasýnda üretilen bilgilerin <tt>Makefile.in</tt> dosyasýna tekrar yazýlmasýný, her bir <b><tt>./configure</tt></b> çaðrýmýnýn da <tt>Makefile.in</tt> dosyalarýnda üretilen bilgi ile benzer iþlemi <tt>Makefile</tt> dosyasýda gerçekleþtirecek olmasýdýr. <tt>Makefile.am</tt> dosyasýný düzenlemek biraz yöntemleri vardýr; çalýþtýrýlabilirler $PATH'e eklenir, ayrýca belgeleri ve kýlavuz sayfalarýný da yaygýn kullanýlan yerlerde bulursunuz. Yine de, bu þekilde yaptýðýnýz zaman, programýnýz sisteminizde var olan herþeyin arasýna yüklenecektir. Bu da paketleme araçlarýný zora sokacak ve hangi dosyalar pakete ait hangileri deðil tespiti zorlaþacaktýr.
    </p><p>
Bunun için farklý bir þeyler yapmalýsýnýz: programý, paketleme araçlarýnýn çalýþan bir <tt>.deb</tt> paketi yapabileceði bir geçici alt dizine kurun. Bir kullanýcýnýn bu paketi kurmak istemesi durumunda, bu dizinin içerdiði herþey  sistemine kurulacaktýr, tek farkla ki, <b><tt>dpkg</tt></b> dosyalarý geçici alt dizine deðil kök dizin altýna kuruyor olacaktýr.
    </p><p>
Bu geçici dizin kaynak dizin hiyerarþisi içinde, <tt>debian/</tt> dizini olarak oluþturulur. Genelde <tt>debian/tmp</tt> veya <tt>debian/paketadý</tt> olarak isimlendirilir.
    </p><p>
Program kurulumunu <tt>debian/paketadý</tt> içine yüklenmiþ þekilde yapmanýz gerekse de, kök dizin altýna yerleþtirilince de düzgün çalýþmasý gerekmektedir, örn. bir <tt>.deb</tt> paketinden kurulum yaparken. Bu bakýmdan paket dosyalarýna derleme sisteminin <tt>/home/me/deb/gentoo-0.9.12/usr/share/gentoo</tt> gibi dizgeyi uygulamasýna izin vermemelisiniz.
    </p><p>
GNU autoconf'u kullanan programlarla bu biraz daha kolay olacaktýr. Böyle programlarýn çoðu, Örneðin <tt>/usr</tt> gibi belli bir öneki uhdesinde tutarken, kurulumun rasgele bir alt dizine yapýlabilmesine imkan veren öntanýmlý bir yapýlandýrma sistemine sahip Makefile dosyalarý içeririrler.  <b><tt>dh_make</tt></b>, programýnýzýn autoconf kullandýðýný saptarsa, komutlarý bunu otomatik olarak yapmasý için ayarlayacaktýr. Böylece, bu bölümün devamýný okumadan geçebileceksiniz. Fakat diðer program türleri için Makefile dosyalarýný incelemeniz ve gereken düzenlemeleri kendiniz yapmanýz gerekecektir.
    </p><p>
Ýþte gentoo'nun Makefile dosyasýnýn ilgili kýsmý:
    </p><p>
<div class="screen" align="right"><table width="95%" cellpadding="5" cellspacing="1" border="0" class="preoutline"><tr class="preinline"><td> <pre class="screen">
# Where to put binary on 'make install'?
# <i>'make install' çalýþtýrýlabilirleri nereye koyacak?</i>
BIN     = /usr/local/bin

# Where to put icons on 'make install'?
# <i>'make install' simgeleri nereye koyacak?</i>
ICONS   = /usr/local/share/gentoo
</pre> </td></tr></table></div>
    </p><p>
Dosyalarýn <tt>/usr/local</tt> altýna yükleneceðini görüyoruz. Bu yollarý þu þekilde deðiþtirin:
    </p><p>
<div class="screen" align="right"><table width="95%" cellpadding="5" cellspacing="1" border="0" class="preoutline"><tr class="preinline"><td> <pre class="screen">
# Where to put binary on 'make install'?
BIN     = $(DESTDIR)/usr/bin

# Where to put icons on 'make install'?
ICONS   = $(DESTDIR)/usr/share/gentoo
</pre> </td></tr></table></div>
    </p><p>
Fakat neden bu dizin de bir baþkasý deðil? Çünkü Debian paketleri dosyalarýný asla <tt>/usr/local</tt> altýna yüklemez - bu hiyerarþi sistem yöneticileri için ayrýlmýþtýr. Bunun yerine, bu tür dosyalar Debian sistemlerinde <tt>/usr</tt> altýna gider.
    </p><p>
Ýkilikler, simgeler, belgelendirme, v.b. ile ilgili daha kesin yerleþtirme bilgisi Dosyasistemi Hiyerarþisi Standardýnda (Filesystem Hierarchy Standard) belirtilmiþtir. Size <tt>/usr/share/doc/debian-policy/fhs/</tt> dizinindekileri okumanýzý ve paketinizle ilgili kýsýmlarý incelemenizi tavsiye ederim.
    </p><p>
O halde, ikilik dosyayý <tt>/usr/local/bin</tt> yerine <tt>/usr/bin</tt>'e, kýlavuz sayfalarýný <tt>/usr/local/man/man1</tt> yerine <tt>/usr/share/man/man1</tt>'e, v.s. yüklemeliyiz. gentoo'nun makefile'ýnda bir kýlavuz sayfasý belirtilmediðini hatýrlayýn, fakat <a class="ulink" href="http://www.debian.org/doc/debian-policy/" target="_top">Debian Politika Kýlavuzu</a> her programýn bir kýlavuz sayfasý olmasýný gerektirdiðinden, ilerde bir tane yapýp <tt>/usr/share/man/man1</tt> altýna koyacaðýz.
    </p><p>
Bazý programlar bu tür yollarý belirtmek için makefile deðiþkenlerini kullanmaz. Bu da doðru yerleþimleri kullanmalarý için asýl C kodunu düzenlemek zorunda kalacaðýnýz anlamýna gelir. Fakat nereyi araþtýracaksýnýz, tam olarak ne için? Bunu aþaðýdakini uygulayarak öðrenebilirsiniz:
    </p><p>
<div class="screen" align="right"><table width="95%" cellpadding="5" cellspacing="1" border="0" class="preoutline"><tr class="preinline"><td> <pre class="screen">grep -rn usr/local/lib *.[ch]</pre> </td></tr></table></div>
    </p><p>
Grep kaynak aðacýnda özyinelemeli olarak çalýþacak ve arananla ilgili bir oluþum olduðunda size dosya adýný ve satýrý söyleyecektir.
    </p><p>
Þu dosyalarý düzenleyiniz ve <tt>/usr/local/*</tt> satýrlarýný <tt>usr/*</tt> ile deðiþtirin. Kodun geri kalan kýsmýna zarar vermediðinizden emin olun. <tt>:-)</tt>
    </p><p>
Bundan sonra hedef yükleme yerini bulmalýsýnýz (<tt>install:</tt> ile baþlayan satýrý araþtýrýn, genelde iþe yarar) ve tüm baþvurularý yukarýnda Makefile dosyasýnda olduðu gibi yeniden adlandýrýn. Önceden, gentoo'nun kurulum hedefi þu þekilde idi:
    </p><p>
<div class="screen" align="right"><table width="95%" cellpadding="5" cellspacing="1" border="0" class="preoutline"><tr class="preinline"><td> <pre class="screen">
install: gentoo
        install ./gentoo $(BIN)
        install icons/* $(ICONS)
        install gentoorc-example $(HOME)/.gentoorc
</pre> </td></tr></table></div>
    </p><p>
Deðiþtirdikten sonra þu þekilde olur:
    </p><p>
<div class="screen" align="right"><table width="95%" cellpadding="5" cellspacing="1" border="0" class="preoutline"><tr class="preinline"><td> <pre class="screen">
install: gentoo-target
        install -d $(BIN) $(ICONS) $(DESTDIR)/etc
        install ./gentoo $(BIN)
        install -m644 icons/* $(ICONS)
        install -m644 gentoorc-example $(DESTDIR)/etc/gentoorc
</pre> </td></tr></table></div>
    </p><p>
Elbetteki farketmiþsinizdir, artýk kural setindeki diðerlerinden önce bir <b><tt>install -d</tt></b> komutu bulunmaktadýr. Orjinal makefile bunu içermemektedir, çünkü genelde <b><tt>make install</tt></b>'ýn çalýþtýrdýðý bir sistemde <tt>/usr/local/bin</tt> ve diðer dizinler bulunmaktadýr. Yine de, kendi boþ (varolmayan) dizinimize kurduðumuz için, bu dizinlerin herbirini oluþturmamýz gerekecektir.
    </p><p>
Kural kümesinin sonuna bazý baþka þeyler de ekleyebiliriz, üst düzey geliþtiricinin bazen atlatýðý ek belgelendirmenin kurulumu gibi.
    </p><p>
<div class="screen" align="right"><table width="95%" cellpadding="5" cellspacing="1" border="0" class="preoutline"><tr class="preinline"><td> <pre class="screen">
        install -d $(DESTDIR)/usr/share/doc/gentoo/html
        cp -a docs/* $(DESTDIR)/usr/share/doc/gentoo/html
</pre> </td></tr></table></div>
    </p><p>
Dikkatli bir okuyucu <b><tt>install:</tt></b> satýrýndaki <tt>gentoo</tt>'yu <tt>gentoo-target</tt>'e çevirdiðimi farketmiþtir. Buna iliþkisiz hata onarýmý (unrelated bug fix) denir <tt>:-)</tt>.
    </p><p>
Her ne zaman Debian paketiyle ilgili bir deðiþiklik yaparsanýz, üst düzey geliþtiriciye de de bunu yollamayý unutmayýn ki böylece programýn yeni sürümünde yer alarak herkese faydalý olabilsin. Ayrýca, göndermeden önce yapacaðýnýz düzeltmeleri sadece Debian ya da Linux'a (ve hatta Unix'e!) özgün olmamasý gerektiðini unutmayýn - onlarý taþýnabilir yapýn. Bu da düzeltmelerinizin uygulanmasý kolaylaþtýrýr.
    </p><p>
<tt>debian/*</tt> dosyalarýný göndermeniz gerekmemektedir.
    </p></dd></div></dl><h1></h1><table width="100%" summary="Navigation header" cellpadding="1" cellspacing="0" border="0"><tr><td bgcolor="black" class="navoutline"><table width="100%" cellpadding="0" cellspacing="0" border="0"><tr><td bgcolor="white" class="navinline"><table width="100%" cellpadding="3" cellspacing="0" border="0"><tr><td width="40%" align="left"><a accesskey="p" href="../howto/maint-guide-tr-s2.4.html">Önceki</a> </td><td width="20%" align="center"><a accesskey="u" href="../howto/maint-guide-tr.html">Üst Ana Baþlýk</a></td><td width="40%" align="right"> <a accesskey="n" href="../howto/maint-guide-tr-s3.1.html">Sonraki</a></td></tr><tr><td width="40%" align="left" valign="top">Ýlk "debianlaþtýrma" </td><td width="20%" align="center"><a accesskey="h" href="../KiTAPLIK/index.html">Baþlangýç</a></td><td width="40%" align="right" valign="top"> Kütüphaneleri deðiþtirmek</td></tr><tr><td colspan="3" align="center">
                  Bir <a href="http://www.belgeler.org/">Linux Kitaplýðý</a> Sayfasý
                </td></tr></table></td></tr></table></td></tr></table></body></html>
