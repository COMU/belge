<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-9"><meta name="date" content="2008-09-26T10:51:12+03:00"><title>PAM (Eklenebilir Kimlik Kanýtlama Modülleri)</title><link rel="icon" type="image/png" href="../images/belgeler-logo.png"><link rel="stylesheet" href="../belgeler.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V-special(derived from 1.49 for Turkish Linux Documentation WG by Nilgün Belma Bugüner - nilgun@superonline.com)"><link rel="home" href="../KiTAPLIK/index.html" title="Linux Kitaplýðý"><link rel="up" href="../howto/user-auth-howto.html" title="Kullanýcý Kimlik Kanýtlama NASIL"><link rel="previous" href="../howto/user-auth-howto-userinfo.html" title="Sisteminizde Kullanýcý Bilgileri Nasýl Saklanýr"><link rel="next" href="../howto/user-auth-howto-secure.html" title="Kullanýcý Kimlik Denetimini Güvenli Hale Getirmek"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><table width="100%" summary="Navigation header" cellpadding="1" cellspacing="0" border="0"><tr><td bgcolor="black" class="navoutline"><table width="100%" cellpadding="0" cellspacing="0" border="0"><tr><td bgcolor="white" class="navinline"><table width="100%" cellpadding="3" cellspacing="0" border="0"><tr><th colspan="3" align="center">PAM (Eklenebilir Kimlik Kanýtlama Modülleri)</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="../howto/user-auth-howto-userinfo.html">Önceki</a> </td><th width="60%" align="center">Kullanýcý Kimlik Kanýtlama NASIL</th><td width="20%" align="right"> <a accesskey="n" href="../howto/user-auth-howto-secure.html">Sonraki</a></td></tr></table></td></tr></table></td></tr></table><dl><div class="sect1"><dt><div> <h2 class="title" style="clear: both"><a name="user-auth-howto-pam"></a>PAM (Eklenebilir Kimlik Kanýtlama Modülleri)</h2></div></dt><dd><p>
 Eklenebilir kimlik kanýtlama modülleri tüm modern linux daðýtýmlarýnda kimlik kanýtlamanýn esasýný oluþturur.
 </p><dl><div class="sect2"><dt><div> <h3 class="title"><a name="id1"></a>Neden</h3></div></dt><dd><p>
Linux'un eski güzel günlerinde su, 
passwd, login ya da xlock gibi bir program
bir kullanýcýnýn kimlik doðrulamasýný yapmak istediðinde gerekli bilgiyi basitçe <tt>/etc/passwd</tt> dosyasýndan okurdu.
Kullanýcýnýn parolasýný deðiþtirmek için <tt>/etc/passwd</tt> dosyasýný düzenlemek yeterliydi.
Bu basit ama beceriksiz yöntem sistem yöneticileri ve uygulama geliþtiricilerini problemlerle karþý karþýya býrakýyordu.
MD5 ve gölgelenmiþ parolalar popüler oldukça kullanýcý kimlik kanýtlamasýna ihtiyaç duyan her programýn 
doðru bilgiyi hangi yöntemle alacaðýný bilmesi gerekliliði ortaya çýktý.
Kullanýcý kimlik kanýtlamasý þemanýzý deðiþtirmek isterseniz tüm programlarý yeniden derlemeniz gerekliydi.
PAM bu karmaþayý kullanýcý bilgisinin nasýl saklandýðýndan baðýmsýz olarak, programlarýn kimlik kanýtlamasýný 
þeffaf bir biçimde yapmalarýna izin vererek ortadan kaldýrdý.
  </p></dd></div></dl><dl><div class="sect2"><dt><div> <h3 class="title"><a name="id2"></a>Nedir</h3></div></dt><dd><p>
<a href="http://www.kernel.org/pub/linux/libs/pam/Linux-PAM-html/pam.html" target="_top">Linux-PAM Sistem Yöneticisinin Kýlavuzu</a>'ndan alýntý: 
&#8592;Linux-PAM projesinin amacý ayrýcalýk verme yazýlýmlarý ile güvenli ve uygun kimlik kanýtlama þemalarýnýn geliþimini birbirinden ayýrmaktýr.
Bu, uygulamalarýn kimlik kanýtlamasýnda kullanabilecekleri bir fonksiyonlar kütüphanesi saðlanarak gerçekleþtirilir.&#8594;
PAM sayesinde parolalarýnýzý <tt>/etc/passwd</tt> dosyasýnda veya Hong Kong'daki bir sunucuda tutmanýz farketmez.
Bir program kullanýcý kimlik kanýtlamasýna ihtiyaç duyduðunda, PAM uygun kimlik kanýtlama þemasý için fonksiyonlarý içeren bir kütüphane sunar. 
Bu kütüphane dinamik olarak yüklendiði için kimlik kanýtlama þemasýný deðiþtirmek için basitçe yapýlandýrma 
dosyasýný düzenlemek yeterli olur. 
  </p><p>
Esneklik PAM'in en önemli güçlerinden birisidir.
PAM belirli programlarýn kullanýcý kimlik kanýtlamasý yapamayacaðý, sadece belirli kullanýcýlarýn kimlik kanýtlamasý yapabileceði,
bazý programlar kimlik kanýtlamasý yapmak istediðinde uyarý verecek þekilde ve hatta tüm kullanýcýlarý oturum açma ayrýcalýklarýndan
mahrum býrakacak þekilde yapýlandýrýlabilir. PAM'in modüler tasarýmý kimlik denetimi üzerindeki bütün kontrolü elinize almanýza izin verir.
  </p><dl><div class="sect3"><dt><div> <h4 class="title"><a name="id12"></a>PAM destekleyen daðýtýmlar</h4></div></dt><dd><p>
Neredeyse tüm tanýnmýþ daðýtýmlar bir süredir PAM destekliyorlar. Aþaðýda PAM destekleyen daðýtýmlarýn bir kýsmýnýn listesi bulunmaktadýr:
    </p><p>
  <div class="itemizedlist"><ul type="disc"><li>Redhat, 5.0 sürümünden itibaren<p></p><p></p></li><li>Mandrake, 5.2 sürümünden itibaren<p></p><p></p></li><li>Debian, 2.1 sürümünden itibaren (2.1 sürümde kýsmi destek -- 2.2 sürümünde tam destek)<p></p><p></p></li><li>Caldera, 1.3 sürümünden itibaren<p></p><p></p></li><li>Turbolinux, 3.6 sürümünden itibaren<p></p><p></p></li><li>SuSE, 6.2 sürümünden itibaren<p></p><p></p></li></ul></div>
    </p><p>
Bu liste tam olmadýðý gibi hatalý da olabilir. Düzeltmelerinizi ve eklemelerinizi <span class="email">&lt;petehern (at) yahoo.com&gt;</span> gönderirseniz memnun olurum.
  </p></dd></div></dl><dl><div class="sect3"><dt><div> <h4 class="title"><a name="id22"></a>PAM Kurulumu</h4></div></dt><dd><p>
Sýfýrdan PAM kurulumu bu NASIL'ýn kapsamýný aþan uzun bir süreçtir.
Eðer sisteminizde PAM kurulu deðilse, büyük olasýlýkla kullandýðýnýz daðýtýmýn çok eski bir sürümünü kullanýyorsunuz.
Daðýtýmýnýzý güncellemeniz için baþka nedenler de bulunmasýna raðmen güncel bir daðýtým kullanmak yerine PAM kurulumunu
kendiniz yapmak istiyorsanýz kesinlikle benim yardýmýma ihtiyacý olan birisi deðilsiniz. Bu nedenlerle sisteminizde PAM kurulu olduðunu kabul edeceðim.
    </p></dd></div></dl></dd></div></dl><dl><div class="sect2"><dt><div> <h3 class="title"><a name="id3"></a>Nasýl</h3></div></dt><dd><p>
Yeterince konuþtum, çalýþma zamaný.
  </p><dl><div class="sect3"><dt><div> <h4 class="title"><a name="id13"></a>PAM yapýlandýrma dosyalarý</h4></div></dt><dd><p>
PAM yapýlandýrma dosyalarý <tt>/etc/pam.d/</tt> dizininde bulunur.
(Eðer sisteminizde <tt>/etc/pam.d/</tt> dizini yoksa dert etmeyin, sýradaki bölümde ne yapacaðýnýzý anlatacaðým)
Þimdi bu dizine geçelim ve neler olduðuna bakalým.
    </p><p>
<div class="programlisting" align="right"><table width="95%" cellpadding="5" cellspacing="1" border="0" class="preoutline"><tr class="preinline"><td> <pre class="programlisting"><tt>~$ </tt><b><tt>cd /etc/pam.d</tt></b>
<tt>/etc/pam.d/$ </tt><b><tt>ls</tt></b>
chfn  chsh    login   other   passwd  su      xlock
<tt>/etc/pam.d/$ </tt>
</pre> </td></tr></table></div>
    </p><p>
Bu dizinin içerdiði dosyalar sisteminize neler kurduðunuza baðlý olarak üç aþaðý beþ yukarý böyledir.
Ayrýntýlar ne olursa olsun, sisteminizde kullanýcý kimlik kanýtlamasýna ihtiyaç duyan her program için bir dosya görüyor olmalýsýnýz.
Tahmin ettiðiniz gibi her dosya bir program için PAM kimlik kanýtlamasý yapýlandýrmasýný içerir
(<tt>other</tt> dosyasý bir istisnadýr, ondan birazdan bahsedeceðiz).
Login için PAM yapýlandýrma dosyasýnýn içeriðine bakalým (dosyanýn içeriðini basitleþtirdim):
    </p><p>
<div class="programlisting" align="right"><table width="95%" cellpadding="5" cellspacing="1" border="0" class="preoutline"><tr class="preinline"><td> <pre class="programlisting"><tt>/etc/pam.d/$ </tt><b><tt>cat login</tt></b>
# PAM configuration for login
auth       requisite  pam_securetty.so
auth       required   pam_nologin.so
auth       required   pam_env.so
auth       required   pam_unix.so nullok
account    required   pam_unix.so
session    required   pam_unix.so
session    optional   pam_lastlog.so
password   required   pam_unix.so nullok obscure min=4 max=8
</pre> </td></tr></table></div>
    </p><p>
Dosyanýn içeriðine geçmeden önce biraz bilgi vermem gerekir.
  </p></dd></div></dl><dl><div class="sect3"><dt><div> <h4 class="title"><a name="id23"></a>Ek bilgi</h4></div></dt><dd><p>
Okuyucularýn küçük bir kýsmý þöyle düþünüyor olmalý; 
&#8592;Olamaz! Sistemimde <tt>/etc/pam.d</tt> dizini yok! Yukarýdaki listenizde daðýtýmýmýn PAM içerdiði söyleniyor ama bulamýyorum. PAM olmadan hayatým boþ ve anlamsýz! Ne yapabilirim?&#8594;
Telaþlanmayýn, herþey bitmiþ deðil. Daðýtýmýnýzýn PAM içerdiðini bildiðiniz halde <tt>/etc/pam.d/</tt>
dizini yoksa PAM yapýlandýrmanýz <tt>/etc/pam.conf</tt> dosyasýnda saklanýyordur.
Birçok dosya kullanmak yerine tüm PAM yapýlandýrmasý için tek bir dosya kullanýlýyordur.
Bu PAM yapýlandýrmasýný biraz karmaþýklaþtýrýr ama uygun ayarlamalar 3.3.4 bölümünde anlatýlacaktýr.
  </p></dd></div></dl><dl><div class="sect3"><dt><div> <h4 class="title"><a name="id33"></a>
   Yapýlandýrma sözdizimi
  </h4></div></dt><dd><p>
   PAM yapýlandýrma dosyalarý aþaðýdaki sözdizimine sahiptir:
    </p><p>
<div class="programlisting" align="right"><table width="95%" cellpadding="5" cellspacing="1" border="0" class="preoutline"><tr class="preinline"><td> <pre class="programlisting">type  control  module-path  module-arguments
</pre> </td></tr></table></div>
    </p><p>
Yukarýdaki örnekte login dosyasý için verilen yapýlandýrma dosyasýný kullanarak PAM yapýlandýrma sözdizimine bakalým:
    </p><p>
  <div class="variablelist"><dl><dt><span class="term">type</span></dt><dd>
Type özelliði PAM'e bu modül için hangi tür kimlik kanýtlamasýnýn kullanýcaðýný söyler.
Ayný türden modüller &#8592;istiflenebilir&#8594;. PAM dört farklý türü tanýr:
    <p></p><p>
     <div class="variablelist"><dl><dt><span class="term">account</span></dt><dd>
Kullanýcýnýn servise eriþmeye izni olup olmadýðýný, parolasýnýn süresinin geçip geçmediðini tespit eder.
       <p></p><p></p></dd><dt><span class="term">auth</span></dt><dd>
Kullanýcýnýn iddia ettiði kiþi olup olmadýðýný denetler, bunu genellikle parola ile yapar ama örneðin biyometri gibi daha karmaþýk yöntemler de kullanabilir.
       <p></p><p></p></dd><dt><span class="term">password</span></dt><dd>
Kullanýcýnýn kimlik kanýtlamasý için kullandýðý þeyi deðiþtirmesi için bir mekanizma saðlar. Bu genellikle paroladýr.
       <p></p><p></p></dd><dt><span class="term">session</span></dt><dd>
Kullanýcýnýn kimlik kanýtlamasý yapýldýktan sonra ve/veya önce yapýlmasý gerekenler.
Bunlar kullanýcýnýn ev dizininin baðlanmasý/çözülmesi, açýp kapattýðý oturumlarýn kaydýnýn tutulmasý ve kullanýcýnýn kullanabileceði
servislerin kýsýtlanmasý gibi þeyler olabilir.
       <p></p><p></p></dd></dl></div>
    </p><p>
login yapýlandýrma dosyasýnda her tür için en az bir girdi olduðunu gördük. 
Bu program kullanýcýlarýn oturum açmalarýna izin verdiðinden (adýndan anlaþýldýðý gibi :), kimlik kanýtlamasýnýn
her türlüsüne eriþebilmesinin gerekmesi anlaþýlabilir bir þeydir.
     </p><p></p></dd><dt><span class="term">control</span></dt><dd>
control özelliði PAM'e bir modül kimlik kanýtlamasýnda baþarýsýz olduðunda ne yapmasý gerektiðini söyler. PAM dört farklý kontrol türünü tanýr:
    <p></p><p>
    <div class="variablelist"><dl><dt><span class="term">requisite</span></dt><dd>
Bu modül yoluyla kimlik kanýtlamasý baþarýsýz olursa kimlik kanýtlamasý derhal reddedilir.      
      <p></p><p></p></dd><dt><span class="term">required</span></dt><dd>
PAM kimlik kanýtlamasýný reddetmeden önce bu servis için listelenmiþ diðer modülleri çaðýrmaya devam etse de baþarýsýzlýk yine kimlik kanýtlamasýnýn reddi ile sonuçlanýr.
      <p></p><p></p></dd><dt><span class="term">sufficient</span></dt><dd>
Bu modül ile kimlik kanýtlamasý baþarýlý olursa, PAM kimlik doðrulamasýný daha önceki gerekli bir modülde baþarýsýz olsa bile kabul edecektir.      
      <p></p><p></p></dd><dt><span class="term">optional</span></dt><dd>
Bu modülün baþarýlý olmasý veya olmamasý ancak bir servis için kendi türünde tek modül olmasý halinde önemlidir.
       <p></p><p></p></dd></dl></div>
    </p><p>
Login için yapýlandýrma dosyasýnda neredeyse tüm kontrol türlerini gördük.
En çok ihtiyaç duyulan modül <tt>pam_unix.so</tt> (temel kimlik kanýtlama modülü), 
zorunlu tek modül <tt>pam_securetty.so</tt> (kullanýcýnýn güvenli konsola oturum açtýðýndan emin olmayý saðlar) ve
seçimlik tek modül <tt>pam_lastlog.so</tt> (kullanýcýnýn en son açtýðý oturum ile ilgili bilgileri getiren modül).   
      </p><p></p></dd><dt><span class="term">module-path</span></dt><dd>
PAM hangi modülü kullanacaðýný ve modülleri nerede bulacaðýný module-path sayesinde bilir. Çoðu yapýlandýrma login örneðinde olduðu gibi sadece modülün adýný içerir. Böyle durumlarda, PAM öntanýmlý PAM modül dizinine bakar, bu normalde <tt>/usr/lib/security</tt> dizinidir. Bununla birlikte eðer linux daðýtýmýnýz Dosyasistemi Hiyerarþisi Standardýna (FHS) uygun ise PAM modülleri <tt>/lib/security</tt> dizininde bulunur.
     <p></p><p></p></dd><dt><span class="term">module-arguments</span></dt><dd>
module-arguments modüllerin parametreleridir. Her modülün kendi parametresi vardýr. Örneðin bizim login yapýlandýrmasýnda &#8592;nulok&#8594; (pam_unix.so modülüne &#8592;null ok&#8594; parametresi gönderilmesi &#8592;null&#8594; parolalarýn &#8592;ok&#8594; olduðu anlamýndadýr).
     <p></p><p></p></dd></dl></div>
   </p></dd></div></dl><dl><div class="sect3"><dt><div> <h4 class="title"><a name="id43"></a><tt>pam.conf</tt> yapýlandýrmasý</h4></div></dt><dd><p>
Eðer PAM yapýlandýrmanýz <tt>/etc/pam.d/</tt> dizini yerine <tt>/etc/pam.conf</tt> dosyasýnda saklanýyorsa PAM yapýlandýrma satýrlarý biraz farklýdýr. Her servisin kendi yapýlandýrma dosyasý olmasý yerine tüm yapýlandýrmalar <tt>/etc/pam.conf</tt> dosyasýnda servisin adý ile baþlayan satýrlardan oluþur. Örneðin <tt>/etc/pam.d/login</tt> dosyasýndaki aþaðýdaki satýr:
    </p><p>
<div class="programlisting" align="right"><table width="95%" cellpadding="5" cellspacing="1" border="0" class="preoutline"><tr class="preinline"><td> <pre class="programlisting">auth       required   pam_unix.so nulok
</pre> </td></tr></table></div>
    </p><p>
<tt>/etc/pam.conf</tt> dosyasýnda þu hale gelir:
    </p><p>
<div class="programlisting" align="right"><table width="95%" cellpadding="5" cellspacing="1" border="0" class="preoutline"><tr class="preinline"><td> <pre class="programlisting">login       auth       required   pam_unix.so nulok
</pre> </td></tr></table></div>
    </p><p>
Bu basit farklýlýklarýn dýþýnda, yapýlandýrmanýn geri kalanýnda PAM sözdizimi uygulanýr.
    </p></dd></div></dl></dd></div></dl><dl><div class="sect2"><dt><div> <h3 class="title"><a name="id4"></a>Daha fazla bilgi edinmek</h3></div></dt><dd><p>
PAM yapýlandýrmasý hakkýnda daha fazla bilgi edinmek ve bütün PAM modül referanslarýna ulaþmak için <a href="http://www.kernel.org/pub/linux/libs/pam/Linux-PAM-html/pam.html" target="_top">Linux-PAM Sistem Yöneticisinin Kýlavuzu</a>'nu kullanabilirsiniz. Bu kýlavuz size PAM yapýlandýrmasý hakkýndaki en güncel referanslarý saðlar.
   </p></dd></div></dl></dd></div></dl><h1></h1><table width="100%" summary="Navigation header" cellpadding="1" cellspacing="0" border="0"><tr><td bgcolor="black" class="navoutline"><table width="100%" cellpadding="0" cellspacing="0" border="0"><tr><td bgcolor="white" class="navinline"><table width="100%" cellpadding="3" cellspacing="0" border="0"><tr><td width="40%" align="left"><a accesskey="p" href="../howto/user-auth-howto-userinfo.html">Önceki</a> </td><td width="20%" align="center"><a accesskey="u" href="../howto/user-auth-howto.html">Üst Ana Baþlýk</a></td><td width="40%" align="right"> <a accesskey="n" href="../howto/user-auth-howto-secure.html">Sonraki</a></td></tr><tr><td width="40%" align="left" valign="top">Sisteminizde Kullanýcý Bilgileri Nasýl Saklanýr </td><td width="20%" align="center"><a accesskey="h" href="../KiTAPLIK/index.html">Baþlangýç</a></td><td width="40%" align="right" valign="top"> Kullanýcý Kimlik Denetimini Güvenli Hale Getirmek</td></tr><tr><td colspan="3" align="center">
                  Bir <a href="http://www.belgeler.org/">Linux Kitaplýðý</a> Sayfasý
                </td></tr></table></td></tr></table></td></tr></table></body></html>
