<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-9"><meta name="date" content="2008-10-06T10:10:12+03:00"><title>Kurulum ve Yapýlandýrma</title><link rel="icon" type="image/png" href="../images/belgeler-logo.png"><link rel="stylesheet" href="../belgeler.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V-special(derived from 1.49 for Turkish Linux Documentation WG by Nilgün Belma Bugüner - nilgun@superonline.com)"><link rel="home" href="../KiTAPLIK/index.html" title="Linux Kitaplýðý"><link rel="up" href="../howto/kerberos-howto.html" title="Kerberos Altyapýsý NASIL"><link rel="previous" href="../howto/kerberos-howto-overview.html" title="Kerberos Altyapýsýnýn Tanýtýmý"><link rel="next" href="../howto/kerberos-howto-time-sync.html" title="Eþzamanlama"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><table width="100%" summary="Navigation header" cellpadding="1" cellspacing="0" border="0"><tr><td bgcolor="black" class="navoutline"><table width="100%" cellpadding="0" cellspacing="0" border="0"><tr><td bgcolor="white" class="navinline"><table width="100%" cellpadding="3" cellspacing="0" border="0"><tr><th colspan="3" align="center">Kurulum ve Yapýlandýrma</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="../howto/kerberos-howto-overview.html">Önceki</a> </td><th width="60%" align="center">Kerberos Altyapýsý NASIL</th><td width="20%" align="right"> <a accesskey="n" href="../howto/kerberos-howto-time-sync.html">Sonraki</a></td></tr></table></td></tr></table></td></tr></table><dl><div class="sect1"><dt><div> <h2 class="title" style="clear: both"><a name="kerberos-howto-install"></a>Kurulum ve Yapýlandýrma</h2></div></dt><dd><dl><div class="sect2"><dt><div> <h3 class="title"><a name="kerberos-howto-machine-configure"></a>Yapýlandýrmaya Genel Bir Bakýþ</h3></div></dt><dd><p>
Bu bölümde KDC olarak iþlev yapacak bilgisayarlarýn ve yazýlýmlarý yapýlandýrmalarý anlatýlacaktýr. Önerilen yapýlandýrmalarda küçük ayarlamalar yapmak isteyebilirsiniz ama KDC'nizi yapýlandýrýrken burada gösterilen bazý anahtar noktalarý hatýrlamanýz çok önemli olacaktýr. Bu yüzden, eðer alternatif bir yapýlandýrma stratejisi izlemeye karar verirseniz buradakileri anladýðýnýzdan emin olun.
</p><p>
Bilgisayarlar Kerberos artalan sürecini çalýþtýracak ve parolalarý saklayacak olduklarýndan, sunucularýn güvenli kalabilmeleri için bulunduklarý aðýn güvenliði son derece önemlidir. Bu sunucularýn ele geçirilmesini önlemek için mümkün olan bütün önlemleri almamýz gerekir. Bu bölümdeki tüm güvenlik uyarýlarý dikkatle uygulanmalýdýr.
</p><p>
Güvenlik tavsiyelerinin anahtar noktasý Kerberos KDC servisi verecek sunucunun adanmýþ sunucu olmasýdýr. Bu sunucunun fiziksel güvenliðini saðlamalý ve üzerinde çalýþacak GNU/Linux'u mümkün olduðunca güçlendirmelisiniz. Eðer KDC ele geçirilirse tüm Kerberos alt yapýnýz ele geçirilmiþ olur.
</p></dd></div></dl><dl><div class="sect2"><dt><div> <h3 class="title"><a name="kerberos-howto-hardware"></a>Donaným</h3></div></dt><dd><p>
Kerberos servisi donanýma fazlaca baðlý olmadýðýndan ve Kerberos servisleri yedekli çalýþabildiðinden sunucunun donanýmý minimum olabilir. Ýþlettiðim Kerberos sunucularým bir PIII iþlemcisi ve iki RAID 1 diski olan sunuculardý. Bu bilgisayarlar günde elli ila yüz bin arasý kimlik denetimi yapmasý gereken sunuculardý. Sunucular yedekli NIC kartlarý ile çalýþtýrýlýrken her iki kartýn birden etkin olmamasýna dikkat edilmesi gerekir. Kerberos'da biletler KDC'nin IP'sini de içerdiðinden eðer bir istemci kimlik denetimi sýrasýnda KDC'nin birden fazla arabirimi ile iletiþim kurarsa kimlik denetiminde zorluklarla karþýlaþabilir.
</p><p>
Kerberos servisinin adanmýþ bir sunucu üzerinde çalýþmasýna dikkat edilmelidir. Adanmýþ bir sunucu ile kasdedilen sadece Kerberos yöneticisinin oturum açmasýnýn gerekeceði bir sunucudur. Bu ayný zamanda, belki SSH hariç, baþka hiç bir servisin çalýþmamasý anlamýna da gelmelidir. Tüm kullanýcýlarýnýzýn parolalarý Kerberos sunucularý üzerinde tutulacaðýndan bu donanýmlara eriþimi mümkün olduðunca kýsýtlamak iyi olacaktýr. Kerberos için adanan sunucularý fiziki güvenliklerini de mümkün olduðunca saðlamak gereklidir. Kerberos sunucularý için bu güvenlik sunucularýn bir kabin içerisine kilitlenmesi ve adanmýþ bir terminalin kullanýlmasýný da kapsar.
</p><p>
Kerberos'un yedekli çalýþma özelliðinden faydalanabilmek için en az iki bilgisayar KDC olarak çalýþmalýdýr. Kerberos bir ana (master) sunucu ve bir veya daha fazla yardýmcý (slave) sunucu ile çalýþabilecek þekilde tasarlanmýþtýr. Ýstediðiniz kadar ikincil sunucunuz olabilir.
</p></dd></div></dl><dl><div class="sect2"><dt><div> <h3 class="title"><a name="kerberos-howto-gnulinux-install"></a>GNU/Linux Kurulumu</h3></div></dt><dd><p>
GNU/Linux kuracaðýmýz sunucular sadece Kerberos servislerinde kullanýlacaðýndan güvenliklerini saðlamak için birkaç ilave iþlem yapabiliriz.
</p><p>
Ýlk olarak, sadece Kerberos servisleri için gerekli yazýlýmlarý kuracaðýz. Bu taným temel iþletim sistemini ve Kerberos yazýlýmýný kapsar. X'i veya herhangi bir GUI uygulamasýný kurmayacaðýz. SSH kurulumu isteðe baðlýdýr. Eðer sunucularý uzaktan yönetmek isterseniz SSH kurabilirsiniz. Ama sunuculara sadece onlara baðlý terminalden eriþmek sunucularý önemli derecede daha fazla güvenli kýlar.
</p><p>
Fedora Core GNU/Linux'da Kerberos servisi vermek için gerekli paketler þunlardýr:
<div class="screen" align="right"><table width="95%" cellpadding="5" cellspacing="1" border="0" class="preoutline"><tr class="preinline"><td> <pre class="screen">krb5-server
krb5-libs
</pre> </td></tr></table></div>
</p><p>
Bilgisayarlarý KDC servisleri haricinde bir iþ için kullanmak istemediðimizden belgeler veya geliþtirme kütüphaneleri kurulmayacaktýr.
</p><p>
Sýradaki adým gerekli olmayan bütün portlarýn kapatýlmasý ve gerekli tüm yamalarýn yapýlmasýdýr. Hangi yönetim yazýlýmý kurulmuþsa onun güvenlik yamalarý yapýlmalýdýr. Bilgisayarýn hangi portlarý dinlediði netstat komutu kullanýlarak öðrenilebilir. Örneðin sadece ssh çalýþtýran bir bilgisayarda aþaðýdaki sonucu görmelisiniz:
</p><p>
<div class="screen" align="right"><table width="95%" cellpadding="5" cellspacing="1" border="0" class="preoutline"><tr class="preinline"><td> <pre class="screen">bash$ <b><tt>netstat -an | grep -i listen | less</tt></b>
tcp        0      0 0.0.0.0:22              0.0.0.0:*               LISTEN
</pre> </td></tr></table></div>
</p><p>
Son olarak, sunucuyu sadece kimlik denetimi için gerekli sunucularla konuþacak þekilde kýsýtlandýrarak yapýlandýracaðýz. Bu iþlem <tt>iptables</tt> ile yapýlabileceði gibi <tt>/etc/hosts.allow</tt> ve <tt>/etc/hosts.deny</tt> dosyalarýný düzenleyerek de yapýlabilir.
</p></dd></div></dl><dl><div class="sect2"><dt><div> <h3 class="title"><a name="kerberos-howto-realm"></a>Bir Bölge Seçmek</h3></div></dt><dd><p>
Bölge adlarý büyük-küçük harfe duyarlýdýr ve aðýnýzda benzersiz olmalýdýr. Ýkinci seviye alan adýnýzý tümü büyük harflerle bölge adýnýz olarak kullanmak bir uygulama standardý olmuþtur. Kerberos'u tüm aðýnýza deðil de bir alt aða kuracaksanýz bu alt aðýn alan adýný kullanmalýsýnýz.
</p><p>
Bölge topolojinizi belirlerken, örgütlenmenizin tüm yapýsýný göz önüne almalýsýnýz. Eðer örðütünüzün bir ya da daha fazla uzak ofisi veya baðýmsýz alt grubu varsa, onlarý ayrý bölgelere dahil etmek daha iyi olacaktýr. Kerberos bölge topolojisi fiziksel að topolojisine deðil sistem yönetim topolojisine benzemelidir.
</p><p>
Son olarak, miras sistemleri de örneðin Kerberos mirasý veya korumak istediðiniz mevcut að topoloji gruplamalarý (Windows NT alaný gibi) hesaba katmalýsýnýz.
</p><p>
Eðer halen tüm aðýnda veya bir alt aðýnda Kerberos çalýþan bir aða Kerberos kuruyorsanýz bölge isimlerinin çakýþmasýndan kaçýnmalýsýnýz. Çalýþan bir Kerberos sistemi mevcutken yeni bir Kerberos kurulmasýna en çok aðlarýn IBM SP kümelemesi içerdiði durumlarda karþýlaþýlýr. Böyle durumlarda en iyi çözüm SP kümelemesi için üçüncü ya da daha üst seviyeden alan adýnda özel bir bölge yaratarak birincil Kerberos bölgeniz için ikinci seviye alan adýný kullanmanýz olacaktýr.
</p><p>
Bu belgede altyapýnýn tasarýmý ve yapýlandýrmasýnýn tasvirine yardýmcý olmak için bir örnek kullanacaðýz. Örneðimiz için hayali Gnu Üniversitesini (Dublin, Ýrlanda) kullanacaðýz. Dublin Gnu Üniversitesi, öðrencilerinin ve fakültelerinin kimlik denetimi için iki Kerberos sunucusu kullanacak. Üniversitenin adresi gnud.ie olduðundan, Kerberos alaný için GNUD.IE adýný kullanacaðýz.
</p></dd></div></dl><dl><div class="sect2"><dt><div> <h3 class="title"><a name="kerberos-howto-configure"></a>Kerberos Yazýlýmý Yapýlandýrmasý</h3></div></dt><dd><p>
Þimdi Kerberos'u yapýlandýrmalý, bir yönetici yaratmalý, kurallarýnýzý belirlemeli ve Kerberos'un esas (principal) veritabanýný ilklendirmelisiniz.
</p><p>
Ýlk adým <tt>/etc/krb5.conf</tt> yapýlandýrma dosyasýný düzenlemektir. Bu dosyada bölge belirlenir, Kerberos sunucularý belirtilerek bölge tanýmlamasý geniþletilir ve son olarak alan bölgesi ayarlanýr. Bizim örneðimizde bu aþaðýdaki gibi yapýlýr:
</p><p>
<div class="screen" align="right"><table width="95%" cellpadding="5" cellspacing="1" border="0" class="preoutline"><tr class="preinline"><td> <pre class="screen">default_realm = GNUD.IE

[realms]
 GNUD.IE = {
  kdc = kerberos1.gnud.ie:88
  kdc = kerberos2.gnud.ie:88
  admin_server = kerberos1.gnud.ie:749
  default_domain = gnud.ie
 }

[domain_realm]
 .gnud.ie = GNUD.IE
 gnud.ie = GNUD.IE
</pre> </td></tr></table></div>
</p><p>
Kerberos veritabanýný yaratmak ve ilklendirmek için aþaðýdaki komutu çalýþtýrmalýsýnýz:
<div class="screen" align="right"><table width="95%" cellpadding="5" cellspacing="1" border="0" class="preoutline"><tr class="preinline"><td> <pre class="screen">{Kerberos1}bash# <b><tt>/usr/Kerberos/sbin/kdb5_util create -s</tt></b>
</pre> </td></tr></table></div>
</p><p>
<tt>-s</tt> seçeneði ile KDC'ye kendisinin kimlik denetimi için bir gizli dosya yaratmasý söylenir. Bir bölge belirlemek için <tt>-r</tt> seçeneðini kullanabilirsiniz. Yeni veritabaný için bir bölge belirlemek ancak <tt>krb5.conf</tt> dosyasýnda birden çok bölge tanýmlýysa gerekli olur.
</p><p>
Ardýndan Kerberos sizden veritabaný için bir yönetici parolasý ister. Bu parolayý unutmamanýz çok önemlidir. Eðer bu parolayý unutursanýz Kerberos'u yönetemezsiniz.
</p><p>
KDC'ye yönetici olarak eriþebilmek için acl dosyasýný düzenlemelisiniz. Bu dosya öntanýmlý olarak <tt>/var/Kerberos/krb5kdc/kadm5.acl</tt> konumundadýr. Gerekirse acl dosyasýnýn yerini <tt>kdc.conf</tt> dosyanýzda belirtin. <tt>kdc.conf</tt> dosyanýzýn yeri <tt>/etc/krb5.conf</tt> dosyasýnda yazar, öntanýmlý olarak <tt>/var/Kerberos/krb5kdc/kdc.conf</tt> konumundadýr. Örneðimizdeki Dublin GNU Üniversitesi için acl dosyamýzý aþaðýdakileri içerecek þekilde düzenleyeceðiz:
</p><p>
<div class="screen" align="right"><table width="95%" cellpadding="5" cellspacing="1" border="0" class="preoutline"><tr class="preinline"><td> <pre class="screen">*/admin@GNUD.IE     *
</pre> </td></tr></table></div>
</p><p>
Bu acl'ler <i>GNUD.IE</i> bölgesinde <tt>/admin</tt> ile biten bir hesabýn tam eriþim yetkisine sahip olduðu anlamýna gelir.
</p><p>
Þimdi yönetici kullanýcýlarýmýzýn eriþimini ayarlamalýyýz; önce yönetici kullanýcýlarý yaratalým. Bunu KDC'de root kabuðunda kadmin.local komutunu addprinc komutu ile birlikte çalýþtýrarak yapabilirsiniz. Yöneticinin kullanýcý adý standart olarak <i>admin</i>'dir. Dublin GNU Üniversitesi Kerberos Yöneticisi için aþaðýdaki komut yeterli olacaktýr:
</p><p>
<div class="screen" align="right"><table width="95%" cellpadding="5" cellspacing="1" border="0" class="preoutline"><tr class="preinline"><td> <pre class="screen">{Kerberos1}bash# <b><tt>/usr/Kerberos/sbin/kadmin.local -q "addprinc admin/admin"</tt></b>
</pre> </td></tr></table></div>
</p><p>
Sunucuda çalýþmasý gereken artalan süreçleri krb5kdc ve kadmin'dir. Eðer gerekirse krb524 çalýþtýrýlarak Kerberos 4 istemcileri için geriye dönük uyumluluk saðlanabilir. krb524 uygulamasýný çalýþtýrmadan önce Kerberos 4 ile ilgili güvenlik uyarýlarýmýzý hatýrlayýn ve ancak mutlaka bu iþlevin gerekli olduðundan emin olduðunuzda çalýþtýrýn. krb5kdc ve kadmin'nin KDC'de otomatik baþlayacak þekilde yapýlandýrýlmasý için chkconfig komutu kullanýlabilir.
</p><p>
<div class="screen" align="right"><table width="95%" cellpadding="5" cellspacing="1" border="0" class="preoutline"><tr class="preinline"><td> <pre class="screen">{Kerberos1}bash# <b><tt>/sbin/chkconfig krb5kdc on</tt></b>
{Kerberos1}bash# <b><tt>/sbin/chkconfig kadmin on</tt></b>
</pre> </td></tr></table></div>
</p><p>
Son olarak, aþaðýdaki komutlarý kullanarak elle baþlatalým:
</p><p>
<div class="screen" align="right"><table width="95%" cellpadding="5" cellspacing="1" border="0" class="preoutline"><tr class="preinline"><td> <pre class="screen">{Kerberos1}bash# <b><tt>/etc/rc.d/init.d/krb5kdc start</tt></b>
{Kerberos1}bash# <b><tt>/etc/rc.d/init.d/kadmin start</tt></b>
</pre> </td></tr></table></div>
</p><p>
ve artýk çalýþan bir KDC'miz var.
</p></dd></div></dl><dl><div class="sect2"><dt><div> <h3 class="title"><a name="kerberos-howto-principal-creation"></a>Yetkili Kullanýcý Yaratma</h3></div></dt><dd><p>
Aþaðýdaki komutla Kerberos'da ilk yetkili kullanýcýnýzý yaratabilirsiniz:
</p><p>
<div class="screen" align="right"><table width="95%" cellpadding="5" cellspacing="1" border="0" class="preoutline"><tr class="preinline"><td> <pre class="screen">{Kerberos1}bash# <b><tt>kadmin.local</tt></b>
{Kerberos1}kadmin.local: <b><tt>addprinc</tt></b> <i>kullanýcýismi</i>
</pre> </td></tr></table></div>
</p><p>
Kerberos ile destekleyeceðiniz çok sayýda kullanýcýnýz varsa hesaplarýn açýlmasý için bir betik yazýlabilir.
</p></dd></div></dl></dd></div></dl><h1></h1><table width="100%" summary="Navigation header" cellpadding="1" cellspacing="0" border="0"><tr><td bgcolor="black" class="navoutline"><table width="100%" cellpadding="0" cellspacing="0" border="0"><tr><td bgcolor="white" class="navinline"><table width="100%" cellpadding="3" cellspacing="0" border="0"><tr><td width="40%" align="left"><a accesskey="p" href="../howto/kerberos-howto-overview.html">Önceki</a> </td><td width="20%" align="center"><a accesskey="u" href="../howto/kerberos-howto.html">Üst Ana Baþlýk</a></td><td width="40%" align="right"> <a accesskey="n" href="../howto/kerberos-howto-time-sync.html">Sonraki</a></td></tr><tr><td width="40%" align="left" valign="top">Kerberos Altyapýsýnýn Tanýtýmý </td><td width="20%" align="center"><a accesskey="h" href="../KiTAPLIK/index.html">Baþlangýç</a></td><td width="40%" align="right" valign="top"> Eþzamanlama</td></tr><tr><td colspan="3" align="center">
                  Bir <a href="http://www.belgeler.org/">Linux Kitaplýðý</a> Sayfasý
                </td></tr></table></td></tr></table></td></tr></table></body></html>
