<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-9"><meta name="date" content="2006-04-25T01:56:24+03:00"><title>acl_data</title><link rel="icon" type="image/png" href="../images/belgeler-logo.png"><link rel="stylesheet" href="../belgeler.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V-special(derived from 1.49 for Turkish Linux Documentation WG by Nilgün Belma Bugüner - nilgun@superonline.com)"><link rel="home" href="../KiTAPLIK/index.html" title="Linux Kitaplýðý"><link rel="up" href="../howto/spam-filtering-exim-final.html" title="Tamamlanmýþ ACL'ler"><link rel="previous" href="../howto/spam-filtering-acl_rcpt_to_final.html" title="acl_rcpt_to"><link rel="next" href="../howto/spam-filtering-glossary.html" title="Terimler Sözlüðü"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><table width="100%" summary="Navigation header" cellpadding="1" cellspacing="0" border="0"><tr><td bgcolor="black" class="navoutline"><table width="100%" cellpadding="0" cellspacing="0" border="0"><tr><td bgcolor="white" class="navinline"><table width="100%" cellpadding="3" cellspacing="0" border="0"><tr><th colspan="3" align="center">acl_data</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="../howto/spam-filtering-acl_rcpt_to_final.html">Önceki</a> </td><th width="60%" align="center">Tamamlanmýþ ACL'ler</th><td width="20%" align="right"> <a accesskey="n" href="../howto/spam-filtering-glossary.html">Sonraki</a></td></tr></table></td></tr></table></td></tr></table><dl><div class="sect2"><dt><div> <h3 class="title"><a name="spam-filtering-acl_data_final"></a><tt>acl_data</tt></h3></div></dt><dd><p>
<div class="screen" align="right"><table width="95%" cellpadding="5" cellspacing="1" border="0" class="preoutline"><tr class="preinline"><td> <pre class="screen">
# Bu eriþim denetim listesi gelen bir SMTP aktarýmýnda ileti verisi
# tamamen alýndýktan sonra kullanýlýr. Bu sýnamalar alýcý adresi
# kabul ya da red edilinceye kadar sýrayla yapýlýr.

acl_data:
  # Bazý baþlýk satýrlarýný günlüðe kaydedelim.
  warn
    logwrite    = Subject: $h_Subject:


  # Ýleti kendi konaklarýmýzdan alýnmýþ ve Message-ID baþlýðýný
  # içermiyorsa, onu biz ekleyeceðiz.
  warn
    condition   = ${if !def:h_Message-ID: {1}}
    hosts       = +relay_from_hosts
    message     = Message-ID: &lt;E$message_id@$primary_hostname&gt;


  # Posta yerel SMTP üzerinden alýnmýþsa (yani, TCP/IP baðlantýsý
  # ile gelmiyorsa), kabul ediyoruz. Bunu boþ bir konak alanýný
  # sýnayarak yapacaðýz. Ayrýca, postalarýný rölelediðimiz
  # konaklardan gelen postalarý da kabul edeceðiz.
  #
  accept
    hosts       = : +relay_from_hosts

  # Ýleti, kimlik kanýtlamasý yapýlan bir baðlantý üzerinden
  # geliyorsa kabul ediyoruz.
  #
  accept
    authenticated = *


  # Eðer $acl_m0'da kayýtlý bir sebep varsa, göndericiyi 20 saniye
  # beklettikten sonra reddediyoruz.
  #
  deny
    message     = $acl_m0
    log_message = $acl_m1
    condition   = ${if and {{def:acl_m0}{def:acl_m1}} {true}{false}}
    delay       = 20s


  # Ýleti uzunluðu sýnýrlamasýný devreye sokalým.
  #
  deny
    message     = Message size $message_size is larger than limit of \
                  MESSAGE_SIZE_LIMIT
    condition   = ${if &gt;{$message_size}{MESSAGE_SIZE_LIMIT}{yes}{no}}


  # Baþlýktaki adreslerin sözdizimi hatalýysa reddediyoruz.
  #
  deny
    message     = Your message does not conform to RFC2822 standard
    log_message = message header fail syntax check
    !verify     = header_syntax


  # Message-ID:, Date: veya Subject: baþlýklarýndan biri olmayan bir
  # ileti dýþardan gelmiþse reddetmek için aþaðýdaki satýrlarý devreye alýn.
  #
  # Bazý özelleþtirilmiþ posta aktarýmcýlarýnýn, örneðin posta listesi
  # sunucularýnýn boþ gönderici adresi ile gönderdikleri postalara
  # kendiliklerinden bir Message-ID üretmedikleri bilinmektedir;
  # böyle durumlar için boþ bir gönderici adresin varlýðýna da bakacaðýz.
  #
  #deny
  #  message     = Your message does not conform to RFC2822 standard
  #  log_message = missing header lines
  #  !hosts      = +relay_from_hosts
  #  !senders    = : postmaster@*
  #  condition   = ${if !eq {$acl_m0}{accept}{true}}
  #  condition   = ${if or {{!def:h_Message-ID:}\
  #                         {!def:h_Date:}\
  #                         {!def:h_Subject:}} {true}{false}}


  # "Sender:", "Reply-To:" veya "From:" satýrlarýndan en azýndan birindeki
  # gönderici adres doðrulanabilir deðilse, bir uyarý veriyoruz.
  #
  warn
    message     = X-Sender-Verify-Failed: No valid sender in message header
    log_message = No valid sender in message header
    !verify     = header_sender



  # --------------------------------------------------------------------
  # Burada, zarf gönderici adresi olmayan iletilere grilisteleme
  # uygulayacaðýz. Bunlarý RCPT TO:'dan sonra grilistelemeye konu
  # etmeyeceðiz, çünkü gönderici varlýk doðrulamalarý yaparken
  # karþý konaklarla olumsuz etkileþime girilebilir.
  #
  # Bu deyimi devreye almadan önce "greylistd" kurmuþ olmalýsýnýz.
  # Bkz:  http://packages.debian.org/unstable/main/greylistd
  #
  #defer
  #  message     = $sender_host_address is not yet authorized to send \
  #                delivery status reports to &lt;$recipients&gt;. \
  #                Please try later.
  #  log_message = greylisted.
  #  senders     = : postmaster@*
  #  condition   = ${if !eq {$acl_m0}{accept}{true}}
  #  set acl_m9  = $sender_host_address $recipients
  #  set acl_m9  = ${readsocket{/var/run/greylistd/socket}{$acl_m9}{5s}{}{}}
  #  condition   = ${if eq {$acl_m9}{grey}{true}{false}}
  #  delay       = 20s
  # --------------------------------------------------------------------



  # --- EXISCAN yapýlandýrmasýnýn BAÞLANGICI ---

  # Birtakým MIME hatalarý olan iletileri reddedeceðiz.
  #
  deny
    message     = Serious MIME defect detected ($demime_reason)
    demime      = *
    condition   = ${if &gt;{$demime_errorlevel}{2}{1}{0}}


  # MIME taþýyýcýyý aç ve kurtlar tarafýndan kullanýlan dosya uzantýlarý
  # varsa reddet. Bu çaðrýlar tekrar demime uygulayacaktýr, ama sonuçlar
  # arabellekli olarak dönecektir. Uzantý listesinin eksik olabileceðini
  # unutmayýn.
  #
  deny
    message     = We do not accept ".$found_extension" attachments here.
    demime      = bat:btm:cmd:com:cpl:dll:exe:lnk:msi:pif:prf:reg:scr:vbs:url


  # Ýletinin boyutu MESSAGE_SIZE_SPAM_MAX'dan büyükse spam veya virüs
  # taramasý yapmaksýzýn kabul ediyoruz.
  accept
    condition   = ${if &gt;{$message_size}{MESSAGE_SIZE_SPAM_MAX} {true}}
    logwrite    = :main: Not classified \
                  (message size larger than MESSAGE_SIZE_SPAM_MAX)


  # --------------------------------------------------------------------
  # Antivirüs taramasý
  # Ana bölümde bir 'av_scanner' tanýmý yapmýþ olmanýz gerekir.
  #
  #deny
  #  message  = This message contains a virus ($malware_name)
  #  demime   = *
  #  malware_name  = */defer_ok
  # --------------------------------------------------------------------



  # $spam_score ve $spam_report'a veri saðlamak için SpamAssassin'i
  # çaðýracaðýz. Tasnife baðlý olarak, $acl_m9 "ham" veya "spam"
  # deðerini alacak.
  #
  # Ýleti spam olarak tasnif edilmiþse ve evvelce $acl_m0'ý iletiyi ne
  # olursa olsun kabul edeceðimizi belirtecek þekilde ayarlamamýþsak,
  # iletiyi reddetmiþ gibi yapacaðýz.
  #
  warn
    set acl_m9  = ham
    # ------------------------------------------------------------------
    # SpamAssassin için kullanýcý bazýnda ayarlarýn kullanýmýný mümkün
    # kýlmak için aþaðýdaki satýrý devreye alýp "spam = mail" satýrýný
    # iptal ediniz.
    # Alýcý adresinin kullanýcý adýný SpamAssassin'e aktaralým.
    # Bunun için adresin '=' veya '@' karakterinden önceki kýsmýný
    # küçük harfe dönüþtüreceðiz. Evvelce bir defadaki alýcý sayýsýný
    # önceden bir ile sýnýrladýðýmýzdan çok sayýda alýcý olmayacak.
    #
    # spam        = ${lc:${extract{1}{=@}{$recipients}{$value}{mail}}}
    # ------------------------------------------------------------------
    spam        = mail
    set acl_m9  = spam
    condition   = ${if !eq {$acl_m0}{accept}{true}}
    control     = fakereject
    logwrite    = :reject: Rejected spam (score $spam_score): $spam_report



  # Ýletinin baþlýðýna bir X-Spam-Status: satýrý ekleyelim.
  #
  warn
    message     = X-Spam-Status: \
                  ${if eq {$acl_m9}{spam}{Yes}{No}} (score $spam_score)\
                  ${if def:spam_report {: $spam_report}}
    logwrite    = :main: Classified as $acl_m9 (score $spam_score)


  # --- EXISCAN yapýlandýrmasýnýn SONU ---


  # Ýletiyi kabul ediyoruz.
  #
  accept
</pre> </td></tr></table></div>
      </p></dd></div></dl><h1></h1><table width="100%" summary="Navigation header" cellpadding="1" cellspacing="0" border="0"><tr><td bgcolor="black" class="navoutline"><table width="100%" cellpadding="0" cellspacing="0" border="0"><tr><td bgcolor="white" class="navinline"><table width="100%" cellpadding="3" cellspacing="0" border="0"><tr><td width="40%" align="left"><a accesskey="p" href="../howto/spam-filtering-acl_rcpt_to_final.html">Önceki</a> </td><td width="20%" align="center"><a accesskey="u" href="../howto/spam-filtering-exim-final.html">Üst Ana Baþlýk</a></td><td width="40%" align="right"> <a accesskey="n" href="../howto/spam-filtering-glossary.html">Sonraki</a></td></tr><tr><td width="40%" align="left" valign="top">acl_rcpt_to </td><td width="20%" align="center"><a accesskey="h" href="../KiTAPLIK/index.html">Baþlangýç</a></td><td width="40%" align="right" valign="top"> Terimler Sözlüðü</td></tr><tr><td colspan="3" align="center">
                  Bir <a href="http://www.belgeler.org/">Linux Kitaplýðý</a> Sayfasý
                </td></tr></table></td></tr></table></td></tr></table></body></html>
