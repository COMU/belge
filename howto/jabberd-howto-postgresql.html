<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-9"><meta name="date" content="2009-03-18T19:52:29+02:00"><title>Kullanýcýlarýn Postgresql'de tutulmasý</title><link rel="icon" type="image/png" href="../images/belgeler-logo.png"><link rel="stylesheet" href="../belgeler.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V-special(derived from 1.49 for Turkish Linux Documentation WG by Nilgün Belma Bugüner - nilgun@superonline.com)"><link rel="home" href="../KiTAPLIK/index.html" title="Linux Kitaplýðý"><link rel="up" href="../howto/jabberd-howto.html" title="Jabber Sunucusu NASIL"><link rel="previous" href="../howto/jabberd-howto-install.html" title="Ön Hazýrlýk"><link rel="next" href="../howto/jabberd-howto-mysql.html" title="Kullanýcýlarýn Mysql'de Tutulmasý"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><table width="100%" summary="Navigation header" cellpadding="1" cellspacing="0" border="0"><tr><td bgcolor="black" class="navoutline"><table width="100%" cellpadding="0" cellspacing="0" border="0"><tr><td bgcolor="white" class="navinline"><table width="100%" cellpadding="3" cellspacing="0" border="0"><tr><th colspan="3" align="center">Kullanýcýlarýn Postgresql'de tutulmasý</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="../howto/jabberd-howto-install.html">Önceki</a> </td><th width="60%" align="center">Jabber Sunucusu NASIL</th><td width="20%" align="right"> <a accesskey="n" href="../howto/jabberd-howto-mysql.html">Sonraki</a></td></tr></table></td></tr></table></td></tr></table><dl><div class="sect1"><dt><div> <h2 class="title" style="clear: both"><a name="jabberd-howto-postgresql"></a>Kullanýcýlarýn Postgresql'de tutulmasý</h2></div></dt><dd><dl><div class="sect2"><dt><div> <h3 class="title"><a name="jabberd-howto-postgresql-install"></a>Kurulum</h3></div></dt><dd><p>Jabberd varsayýlan olarak Mysql veritabanýný seçmektedir, ancak belgenin bu kýsmýnda Jabber sunucusunu Postgresql ile kullanacaðýmýzdan,  Openssl ve Libidn kullanýlarak sistemi yapýlandýralým:
<div class="screen" align="right"><table width="95%" cellpadding="5" cellspacing="1" border="0" class="preoutline"><tr class="preinline"><td> <pre class="screen"><b><tt>cd</tt></b> jabberd-2.2.7.1
<b><tt>./configure</tt></b> --enable-pgsql --enable-ssl --enable-idn</pre> </td></tr></table></div></p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0"><tr><td rowspan="2" align="center" valign="top" width="25"><img src="../images/xsl/note.png"></td><th>Not</th></tr><tr><td colspan="2" align="left" valign="top"><p>Eðer yukarýdaki komutu uygulamanýza raðmen halen Mysql ile derleme konusunda ýsrarla karþýlaþýrsanýz aþaðýdaki komutu deneyin:</p><div class="screen" align="right"><table width="95%" cellpadding="5" cellspacing="1" border="0" class="preoutline"><tr class="preinline"><td> <pre class="screen">
<b><tt>./configure</tt></b> --disable-mysql --enable-pgsql --enable-ssl --enable-idn</pre> </td></tr></table></div></td></tr></table></div><p>
Eðer ek olarak path ya da kütüphane eklemek istiyorsanýz:
<i><tt>-with-extra-include-path</tt></i> ve  <i><tt>-with-extra-library-path</tt></i> seçeneklerini kullanabilirsiniz.</p><p>Örnek bir komut için:
<div class="screen" align="right"><table width="95%" cellpadding="5" cellspacing="1" border="0" class="preoutline"><tr class="preinline"><td> <pre class="screen"><b><tt>./configure</tt></b> <i><tt>--disable-mysql --enable-pgsql --enable-ssl --enable-idn</tt></i> \
<i><tt>-with-extra-include-path=/etc/postgresql:/usr/include/postgresql:/usr/share/postgresql</tt></i> \
<i><tt>-with-extra-library-path=/usr/lib/postgresql</tt></i></pre> </td></tr></table></div>
</p><p>Yapýlandýrma sorunsuz bittikten sonra;
<div class="screen" align="right"><table width="95%" cellpadding="5" cellspacing="1" border="0" class="preoutline"><tr class="preinline"><td> <pre class="screen"><b><tt>make</tt></b>
<b><tt>make install</tt></b></pre> </td></tr></table></div>
komutlarýný vererek kurulum iþini bitirin.
</p></dd></div></dl><dl><div class="sect2"><dt><div> <h3 class="title"><a name="jabberd-howto-postgresql-config"></a>Yapýlandýrma</h3></div></dt><dd><p>Jabberd dosyalarýnýn içerdiði bilgiler arasýnda parolalar da olduðu için gerekli izinleri aþaðýdaki gibi ayarlayalým:

<div class="screen" align="right"><table width="95%" cellpadding="5" cellspacing="1" border="0" class="preoutline"><tr class="preinline"><td> <pre class="screen"><b><tt>chown</tt></b> -R root:jabber <tt>/usr/local/etc/jabberd/*</tt>
<b><tt>chmod</tt></b> -R 640 <tt>/usr/local/etc/jabberd/*</tt></pre> </td></tr></table></div>
</p><p>Böylece artýk yalnýzca jabber kullanýcýsý ve root'un yapýlandýrma
dosyalarýný okuyabilmesini ve deðiþtirebilmesini saðladýk.</p><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0"><tr><td rowspan="2" align="center" valign="top" width="25"><img src="../images/xsl/tip.png"></td><th>Ýpucu</th></tr><tr><td colspan="2" align="left" valign="top"><p>Kolaylýk için yapýlandýrma dosyalarýna bir sembolik link atayabilirsiniz:</p><div class="screen" align="right"><table width="95%" cellpadding="5" cellspacing="1" border="0" class="preoutline"><tr class="preinline"><td> <pre class="screen">ln -s /usr/local/etc/jabberd/ /etc/jabberd</pre> </td></tr></table></div></td></tr></table></div><p>Þimdi <tt>/etc/jabberd</tt> dizinine geçip ve yapýlandýrma dosyalarýný düzenleme iþine baþlayalým. 
Jabberd'de yapýlandýrma dosyalarý xml halinde bulunurlar. Ýlk iþ
olarak <tt>sm.xml</tt> ve <tt>c2s.xml</tt> dosyalarýndaki <i><tt>hostname</tt></i>'i ayarlayýn. Bunun için 
<tt>sm.xml</tt> dosyasýnýn ilk paragrafýnda <i><tt>localhost</tt></i> gördüðünüz yere kendi
alan adýnýzý yazýn:
</p><div class="screen" align="right"><table width="95%" cellpadding="5" cellspacing="1" border="0" class="preoutline"><tr class="preinline"><td> <pre class="screen">&lt;!-- Session manager configuration --&gt;
&lt;sm&gt;
 &lt;!-- Our ID on the network. Users will have this as the domain part of
      their JID. If you want your server to be accessible from other
      Jabber servers, this ID must be resolvable by DNS.s
      (default: localhost) --&gt;
 &lt;id&gt;<i><tt>jabber.comu.edu.tr</tt></i>&lt;/id&gt;
</pre> </td></tr></table></div><p><tt>c2s.xml</tt> dosyasýnda ise "Local Network Configuration" ile baþlayan
kýsýmda <i><tt>localhost</tt></i> yazan yere kendi alan adýnýzý yazýn:</p><div class="screen" align="right"><table width="95%" cellpadding="5" cellspacing="1" border="0" class="preoutline"><tr class="preinline"><td> <pre class="screen">&lt;!-- Local network configuration --&gt;
 &lt;local&gt;
   &lt;!-- Who we identify ourselves as. This should correspond to the
        ID (host) that the session manager thinks it is. You can
        specify more than one to support virtual hosts, as long as you
        have additional session manager instances on the network to
        handle those hosts. The realm attribute specifies the auth/reg
        or SASL authentication realm for the host. If the attribute is
        not specified, the realm will be selected by the SASL
        mechanism, or will be the same as the ID itself. Be aware that
        users are assigned to a realm, not a host, so two hosts in the
        same realm will have the same users.
        If no realm is specified, it will be set to be the same as the
        ID. --&gt;
   &lt;id&gt;<i><tt>jabber.comu.edu.tr</tt></i>&lt;/id&gt;</pre> </td></tr></table></div><p>Þimdi Postgresql ile olan iþimizi halledelim. Öncelikle Jabberd için bir veritabaný yaratýn:
<div class="screen" align="right"><table width="95%" cellpadding="5" cellspacing="1" border="0" class="preoutline"><tr class="preinline"><td> <pre class="screen"><b><tt>createdb</tt></b> -U postgres jabberd2</pre> </td></tr></table></div>
</p><p>Daha sonra da jabberd2 kullanýcýsýný oluþturun:
<div class="screen" align="right"><table width="95%" cellpadding="5" cellspacing="1" border="0" class="preoutline"><tr class="preinline"><td> <pre class="screen"><b><tt>createuser</tt></b> -P -U postgres jabberd2</pre> </td></tr></table></div>
</p><p>Daha sonra açtýðýnýz Jabberd kaynak kodlarýnýn bulunduðu dizindeki
<tt>tools</tt> dizinine geçerek;
<div class="screen" align="right"><table width="95%" cellpadding="5" cellspacing="1" border="0" class="preoutline"><tr class="preinline"><td> <pre class="screen"><b><tt>psql</tt></b> -U jabberd2 jabberd2</pre> </td></tr></table></div>
ve ardýndan;
<div class="screen" align="right"><table width="95%" cellpadding="5" cellspacing="1" border="0" class="preoutline"><tr class="preinline"><td> <pre class="screen"><b><tt>jabberd2</tt></b> -i db-setup.pgsql</pre> </td></tr></table></div>
komutlarýný çalýþtýrarak db-setup.pgsql betiðini çalýþtýrýn. 
</p><p>Þimdi yapýlandýrma dosyanýzda veritabaný için ufak bir kaç ayar
yapmanýz gerekiyor. Öncelikle <tt>sm.xml</tt> dosyasýnda "Storage database configuration" ile
baþlayan satýra gidip driver etiketleri arasýnda yazýlý olan mysql'i pgsql'e çevirin.
<div class="screen" align="right"><table width="95%" cellpadding="5" cellspacing="1" border="0" class="preoutline"><tr class="preinline"><td> <pre class="screen">
&lt;!-- Storage database configuration --&gt;
       &lt;storage&gt;
         &lt;!-- By default, we use the MySQL driver for all storage --&gt;
         &lt;driver&gt;<i><tt>pgsql</tt></i>&gt;&lt;/driver&gt;
</pre> </td></tr></table></div>
</p><p>
Sonra yine ayný dosyada postgresql ile olan kýsýmdaki ("PostgreSQL
driver configuration" etiketi ile baþlayan) "<i><tt>secret</tt></i>" kelimesi yerine
kendi parolanýzý yazýn.
<div class="screen" align="right"><table width="95%" cellpadding="5" cellspacing="1" border="0" class="preoutline"><tr class="preinline"><td> <pre class="screen">&lt;!-- PostgreSQL driver configuration --&gt;
     &lt;pgsql&gt;
       &lt;!-- Database server host and port --&gt;
       &lt;host&gt;<i><tt>localhost</tt></i>&lt;/host&gt;
       &lt;port&gt;<i><tt>5432</tt></i>&lt;/port&gt;

       &lt;!-- Database name --&gt;
       &lt;dbname&gt;<i><tt>jabberd2</tt></i>&lt;/dbname&gt;

       &lt;!-- Database username and password --&gt;
       &lt;user&gt;<i><tt>jabberd2</tt></i>&lt;/user&gt;
       &lt;pass&gt;<i><tt>secret</tt></i>&lt;/pass&gt;

       &lt;!-- Transaction support. If this is commented out, transactions
            will be disabled. This might make database accesses faster,
            but data may be lost if jabberd crashes. --&gt;
       &lt;transactions/&gt;
     &lt;/pgsql&gt;</pre> </td></tr></table></div>
</p><p>
Þimdi <tt>c2s.xml</tt> dosyasýný açýn ve "Authentication/registration
database configuration" ile baþlayan etikette module tagýndaki <i><tt>mysql</tt></i>'i
<i><tt>pgsql</tt></i>'e çevirin.
<div class="screen" align="right"><table width="95%" cellpadding="5" cellspacing="1" border="0" class="preoutline"><tr class="preinline"><td> <pre class="screen">&lt;!-- Authentication/registration database configuration --&gt;
     &lt;authreg&gt;
       &lt;!-- Backend module to use --&gt;
       &lt;module&gt;<i><tt>pgsql</tt></i>&lt;/module&gt;
</pre> </td></tr></table></div>
</p><p>Sonra yine ayný dosyadaki "PostgreSQL module configuration" ile
baþlayan etikette "Database username and password" kýsmýndaki <i><tt>secret</tt></i>
kelimesinin yerine jabberd2 kullanýcýsýnýn veritabaný parolasýný yazýn.
<div class="screen" align="right"><table width="95%" cellpadding="5" cellspacing="1" border="0" class="preoutline"><tr class="preinline"><td> <pre class="screen">&lt;!-- PostgreSQL module configuration --&gt;
     &lt;pgsql&gt;
       &lt;!-- Database server host and port --&gt;
       &lt;host&gt;<i><tt>localhost</tt></i>&lt;/host&gt;
       &lt;port&gt;<i><tt>5432</tt></i>&lt;/port&gt;

       &lt;!-- Database name --&gt;
       &lt;dbname&gt;<i><tt>jabberd2</tt></i>&lt;/dbname&gt;

       &lt;!-- Database username and password --&gt;
       &lt;user&gt;<i><tt>jabberd2</tt></i>&lt;/user&gt;
       &lt;pass&gt;<i><tt>secret</tt></i>&lt;/pass&gt;
     &lt;/pgsql&gt;</pre> </td></tr></table></div>
</p></dd></div></dl></dd></div></dl><h1></h1><table width="100%" summary="Navigation header" cellpadding="1" cellspacing="0" border="0"><tr><td bgcolor="black" class="navoutline"><table width="100%" cellpadding="0" cellspacing="0" border="0"><tr><td bgcolor="white" class="navinline"><table width="100%" cellpadding="3" cellspacing="0" border="0"><tr><td width="40%" align="left"><a accesskey="p" href="../howto/jabberd-howto-install.html">Önceki</a> </td><td width="20%" align="center"><a accesskey="u" href="../howto/jabberd-howto.html">Üst Ana Baþlýk</a></td><td width="40%" align="right"> <a accesskey="n" href="../howto/jabberd-howto-mysql.html">Sonraki</a></td></tr><tr><td width="40%" align="left" valign="top">Ön Hazýrlýk </td><td width="20%" align="center"><a accesskey="h" href="../KiTAPLIK/index.html">Baþlangýç</a></td><td width="40%" align="right" valign="top"> Kullanýcýlarýn Mysql'de Tutulmasý</td></tr><tr><td colspan="3" align="center">
                  Bir <a href="http://www.belgeler.org/">Linux Kitaplýðý</a> Sayfasý
                </td></tr></table></td></tr></table></td></tr></table></body></html>
