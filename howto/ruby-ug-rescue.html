<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-9"><meta name="date" content="2006-04-25T01:56:03+03:00"><title>Hata Ýþleme: rescue deyimi</title><link rel="icon" type="image/png" href="../images/belgeler-logo.png"><link rel="stylesheet" href="../belgeler.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V-special(derived from 1.49 for Turkish Linux Documentation WG by Nilgün Belma Bugüner - nilgun@superonline.com)"><link rel="home" href="../KiTAPLIK/index.html" title="Linux Kitaplýðý"><link rel="up" href="../howto/ruby-ug.html" title="Ruby Kullanýcý Kýlavuzu"><link rel="previous" href="../howto/ruby-ug-constants.html" title="Sýnýf Sabitleri"><link rel="next" href="../howto/ruby-ug-ensure.html" title="Hata Ýþleme: ensure deyimi"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><table width="100%" summary="Navigation header" cellpadding="1" cellspacing="0" border="0"><tr><td bgcolor="black" class="navoutline"><table width="100%" cellpadding="0" cellspacing="0" border="0"><tr><td bgcolor="white" class="navinline"><table width="100%" cellpadding="3" cellspacing="0" border="0"><tr><th colspan="3" align="center">Hata Ýþleme: rescue deyimi</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="../howto/ruby-ug-constants.html">Önceki</a> </td><th width="60%" align="center">Ruby Kullanýcý Kýlavuzu</th><td width="20%" align="right"> <a accesskey="n" href="../howto/ruby-ug-ensure.html">Sonraki</a></td></tr></table></td></tr></table></td></tr></table><dl><div class="sect1"><dt><div> <h2 class="title" style="clear: both"><a name="ruby-ug-rescue"></a>Hata Ýþleme: <tt>rescue</tt> deyimi</h2></div></dt><dd><p>
Çalýþtýrýlan bir yazýlým beklenmeyen sorunlar doðurabilir. Okunmaya çalýþýlan bir dosya mevcut olmayabilir ya da veri kaydetmemek istediðimiz disk dolu olabilir yada kullanýcý beklenmeyen bir girdi yapabilir.
  </p><p>
<div class="screen" align="right"><table width="95%" cellpadding="5" cellspacing="1" border="0" class="preoutline"><tr class="preinline"><td> <pre class="screen">
<tt>ruby&gt; </tt> <tt class="empinput"> file = open("bir_dosya")</tt>
<tt class="empoutput">ERR: (eval):1:in `open': No such file or directory - bir_dosya</tt>
</pre> </td></tr></table></div>
  </p><p>
Güçlü bir yazýlým bu gibi durumlarý hassasiyetle yakalayacaktýr. C yazýlýmcýlarýndan, hata doðurabilecek her sistem çaðrýsýnýn sonucunu kontrol etmeleri ve anýnda ne yapýlacaðýna iliþkin karar vermeleri beklenir:
  </p><p>
<div class="screen" align="right"><table width="95%" cellpadding="5" cellspacing="1" border="0" class="preoutline"><tr class="preinline"><td> <pre class="screen">FILE *file = fopen("bir_dosya", "r");
if (file == NULL) {
  fprintf( stderr, "Dosya mevcut deðil.\n" );
  exit(1);
}
bytes_read = fread( buf, 1, bytes_desired, file );
if (bytes_read != bytes_desired ) {
  /* hata giderme iþlemleri... */
}
...
</pre> </td></tr></table></div>
  </p><p>
Bu yazýlýmcýlarý dikkatsizliðe ve ihmalciliðe iten, üstelik hatalarý tam olarak yakalayamayan bir yazýlým yazmanýza yol açan sýkýcý bir uygulamadýr. Öte yandan, iþi doðru düzgün yapmak, yakalanabilecek bir çok hata olduðu için yazýlýmýn okunabilirliðini oldukça zorlaþtýracaktýr.
  </p><p>
Güncel bir çok dilde olduðu gibi Ruby'de de, yazýlýmcýyý ya da sonradan kodumuzu okuyan kiþileri sýkýntýya sokmadan, sürprizleri kod bloklarýndan soyutlayan bir yolla yakalayabiliriz.
  </p><p>
<b><tt>begin</tt></b> ile iþaretlenmiþ kod bloðu bir istisnayla karþýlaþana dek çalýþtýrýlýr, hata durumunda denetimi <b><tt>rescue</tt></b> ile iþaretlenmiþ kod bloðuna verir. Eðer hiçbir istisnayla karþýlaþýlmazsa <b><tt>rescue</tt></b> kodu kullanýlmaz. Aþaðýdaki yöntem bir metin dosyasýnýn ilk satýrýný döndürür, bir istisna ile karþýlaþýrsa <b><tt>nil</tt></b> deðerini:
  </p><p>
<div class="screen" align="right"><table width="95%" cellpadding="5" cellspacing="1" border="0" class="preoutline"><tr class="preinline"><td> <pre class="screen">
def first_line( filename )
  begin
    file = open("bir_dosya")
    info = file.gets
    file.close
    info  # Deðerlendirmeye alýnan son þey dönüþ deðeri
  rescue
    nil   # Dosyayý okuyamýyor musunuz? O zaman bir dizge dönmez.
  end
end
</pre> </td></tr></table></div>
  </p><p>
Bir problemle yaratýcý bir biçimde ilgilenmek istediðimiz zamanlar olacaktýr. Örneðin dosyaya eriþmek mümkün deðilse standart girdi yerine baþka bir þey kullanmak isteyebiliriz:
  </p><p>
<div class="screen" align="right"><table width="95%" cellpadding="5" cellspacing="1" border="0" class="preoutline"><tr class="preinline"><td> <pre class="screen">
begin
  file = open("bir_dosya")
rescue
  file = STDIN
end

begin
  # ... girdiyi deðerlendir ...
rescue
  # ... burada diðer istisnalarla uðraþ.
end
</pre> </td></tr></table></div>
  </p><p>
<b><tt>begin</tt></b> kodunu tekrar çalýþtýrmak için <b><tt>rescue</tt></b>'nun içinde <b><tt>retry</tt></b>'ý kullanabiliriz. Bu bize önceki örneðimizi daha kýsa þekilde yazmamýza izin verir:
  </p><p>
<div class="screen" align="right"><table width="95%" cellpadding="5" cellspacing="1" border="0" class="preoutline"><tr class="preinline"><td> <pre class="screen">
fname = "bir_dosya"
begin
  file = open(fname)
  # ... girdiyi degerlendir ...
rescue
  fname = "STDIN"
  retry
end
</pre> </td></tr></table></div>
  </p><p>
Ancak burada bir kusur bulunmaktadýr. Hiç olmayan bir dosya bu kodun sonsuz bir döngüde kendisini tekrar etmesini saðlayacaktýr. <b><tt>retry</tt></b>'ý kullanýrken bu tür durumlara dikkat etmelisiniz.
  </p><p>
Her Ruby kütüphanesi, sizin de kendi kodunuzda yapabileceðiniz gibi, herhangi bir hata karþýsýnda bir istisna doðurur. Bir istisnayý çýkarmak için <b><tt>raise</tt></b> kullanýlýr. <b><tt>raise</tt></b> tek argüman olarak istisnayý açýklayan bir dizge alýr. Bu argüman isteðe baðlýdýr ancak atlanmamasý gereken bir husustur. Özel deðiþkenlerden olan <b><tt>$!</tt></b> ile sonradan ulaþýlabilir.
  </p><p>
<div class="screen" align="right"><table width="95%" cellpadding="5" cellspacing="1" border="0" class="preoutline"><tr class="preinline"><td> <pre class="screen"><tt>ruby&gt; </tt> <tt class="empinput"> raise "deneme hatasý"</tt>
   <tt class="empoutput">deneme hatasý</tt>
<tt>ruby&gt; </tt> <tt class="empinput"> begin</tt>
    | <tt class="empinput">   raise "dnm2"</tt>
    | <tt class="empinput"> rescue</tt>
    | <tt class="empinput">   print "Bir hata meydana geldi: ",$!, "\n"</tt>
    | <tt class="empinput"> end</tt>
Bir hata meydana geldi: dnm2
   <tt class="empoutput">nil</tt>
</pre> </td></tr></table></div>
  </p></dd></div></dl><h1></h1><table width="100%" summary="Navigation header" cellpadding="1" cellspacing="0" border="0"><tr><td bgcolor="black" class="navoutline"><table width="100%" cellpadding="0" cellspacing="0" border="0"><tr><td bgcolor="white" class="navinline"><table width="100%" cellpadding="3" cellspacing="0" border="0"><tr><td width="40%" align="left"><a accesskey="p" href="../howto/ruby-ug-constants.html">Önceki</a> </td><td width="20%" align="center"><a accesskey="u" href="../howto/ruby-ug.html">Üst Ana Baþlýk</a></td><td width="40%" align="right"> <a accesskey="n" href="../howto/ruby-ug-ensure.html">Sonraki</a></td></tr><tr><td width="40%" align="left" valign="top">Sýnýf Sabitleri </td><td width="20%" align="center"><a accesskey="h" href="../KiTAPLIK/index.html">Baþlangýç</a></td><td width="40%" align="right" valign="top"> Hata Ýþleme: ensure deyimi</td></tr><tr><td colspan="3" align="center">
                  Bir <a href="http://www.belgeler.org/">Linux Kitaplýðý</a> Sayfasý
                </td></tr></table></td></tr></table></td></tr></table></body></html>
