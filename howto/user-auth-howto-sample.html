<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-9"><meta name="date" content="2008-09-26T10:51:12+03:00"><title>Tümünü birden denemek</title><link rel="icon" type="image/png" href="../images/belgeler-logo.png"><link rel="stylesheet" href="../belgeler.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V-special(derived from 1.49 for Turkish Linux Documentation WG by Nilgün Belma Bugüner - nilgun@superonline.com)"><link rel="home" href="../KiTAPLIK/index.html" title="Linux Kitaplýðý"><link rel="up" href="../howto/user-auth-howto.html" title="Kullanýcý Kimlik Kanýtlama NASIL"><link rel="previous" href="../howto/user-auth-howto-secure.html" title="Kullanýcý Kimlik Denetimini Güvenli Hale Getirmek"><link rel="next" href="../howto/user-auth-howto-res.html" title="Kaynaklar"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><table width="100%" summary="Navigation header" cellpadding="1" cellspacing="0" border="0"><tr><td bgcolor="black" class="navoutline"><table width="100%" cellpadding="0" cellspacing="0" border="0"><tr><td bgcolor="white" class="navinline"><table width="100%" cellpadding="3" cellspacing="0" border="0"><tr><th colspan="3" align="center">Tümünü birden denemek</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="../howto/user-auth-howto-secure.html">Önceki</a> </td><th width="60%" align="center">Kullanýcý Kimlik Kanýtlama NASIL</th><td width="20%" align="right"> <a accesskey="n" href="../howto/user-auth-howto-res.html">Sonraki</a></td></tr></table></td></tr></table></td></tr></table><dl><div class="sect1"><dt><div> <h2 class="title" style="clear: both"><a name="user-auth-howto-sample"></a>Tümünü birden denemek</h2></div></dt><dd><p>
Bu bölümde bir önceki bölümde anlatýlanlarýn anlaþýlmasýna yardýmcý olacak basit bir örnek vereceðim.
  </p><dl><div class="sect2"><dt><div> <h3 class="title"><a name="id1"></a>Apache + mod_auth_pam</h3></div></dt><dd><p>
Örneðimizde PAM kullanarak web sunucunuzun kullanýcýlarýnýn kimlik denetimini yapmak üzere bir Apache modülü olan mod_auth_pam'i kurup yapýlandýracaðýz. Örneðin hedefine ulaþabilmesi için kurulu bir Apache'niz olduðunu kabul edeceðim. Eðer kurulu deðilse daðýtýmýnýzýn kurulum paketlerinden yararlanabilirsiniz.
   </p></dd></div></dl><dl><div class="sect2"><dt><div> <h3 class="title"><a name="id2"></a>Örnek</h3></div></dt><dd><p>
Kullanýcýlarýmýzýn kimlik denetimini PAM ile yapabilmek için hedefimiz web sunucumuzda kýsýtlý bir <tt>aile/</tt>
dizini yapýlandýrmak olacak.
Bu dizin özel aile bilgileri içerecek ve sadece aile grubu üyeleri tarafýndan eriþilebilir olacak.
   </p></dd></div></dl><dl><div class="sect2"><dt><div> <h3 class="title"><a name="id3"></a>mod_auth_pam kurulumu</h3></div></dt><dd><p>
Ýlk olarak <a href="http://pam.sourceforge.net/mod_auth_pam/" target="_top">mod_auth_pam</a> paketini indirmek isteyeceksiniz. 
Aþaðýdaki komutlarla (root olarak) mod_auth_pam derlenebilir:
    </p><p>
<div class="programlisting" align="right"><table width="95%" cellpadding="5" cellspacing="1" border="0" class="preoutline"><tr class="preinline"><td> <pre class="programlisting"><tt>~#</tt> <b><tt>tar xzf mod_auth_pam.tar.gz</tt></b>
<tt>~#</tt> <b><tt>cd mod_auth_pam-1.0a</tt></b>
<tt>~/mod_auth_pam-1.0a#</tt> <b><tt>make</tt></b>
<tt>~/mod_auth_pam-1.0a#</tt> <b><tt>make install</tt></b>
</pre> </td></tr></table></div>
    </p><p>
mod_auth_pam modülünü yüklerken bir hata ile karþýlaþýrsanýz daðýtýmýnýzýn apache-dev paketini kurup kurmadýðýnýzý kontrol edin. mod_auth_pam kurulduktan sonra apache'yi yeniden baþlatmanýz gerekir. Bunu aþaðýdaki komutla (yine root olarak) yapabilirsiniz:
    </p><p>
<div class="programlisting" align="right"><table width="95%" cellpadding="5" cellspacing="1" border="0" class="preoutline"><tr class="preinline"><td> <pre class="programlisting"><tt>~#</tt> <b><tt>/etc/init.d/apache restart</tt></b>
</pre> </td></tr></table></div>
    </p></dd></div></dl><dl><div class="sect2"><dt><div> <h3 class="title"><a name="id4"></a>PAM Yapýlandýrmasý</h3></div></dt><dd><p>
Apache için PAM yapýlandýrmasý <tt>/etc/pam.d/httpd</tt> dizininde saklanýr.
Öntanýmlý yapýlandýrma (mod_auth_pam kurulumunda yapýlan yapýlandýrma) güvenlidir ama birçok sistemde kurulu 
olmayabilen <tt>pam_pwdb.so</tt> modülünü kullanýr. (Ayrýca, sýfýrdan yapýlandýrmak eðlencelidir!)
Bu nedenle <tt>/etc/pam.d/httpd</tt> dosyasýný silin ve yeni bir tanesiyle baþlayýn.
    </p><dl><div class="sect3"><dt><div> <h4 class="title"><a name="id14"></a>PAM'in nasýl yapýlandýrýlacaðýna karar vermek</h4></div></dt><dd><p>
Eðer PAM Apache'nin kimlik kanýtlama isteklerine yanýt verecek þekilde yapýlandýrýlacaksa  
PAM'in tam olarak neyi kontrol etmesine ihtiyacýmýz olduðunu bilmeliyiz.
Ýlk olarak PAM kullanýcýnýn parolasýnýn standart unix parola veritabanýndaki parola ile ayný olup olmadýðýný 
kontrol etmelidir. Bu 'auth' türüne ve <tt>pam_unix.so</tt> modülüne benzer.
Modülün kontrol türünü 'required' olarak atayacaðýz. Bu sayede doðru parola girilmez ise kimlik denetimi baþarýsýz olacaktýr.
<tt>/etc/pam.d/httpd</tt> dosyamýzýn ilk satýrý aþaðýdaki gibi olmalýdýr:
    </p><p>
<div class="programlisting" align="right"><table width="95%" cellpadding="5" cellspacing="1" border="0" class="preoutline"><tr class="preinline"><td> <pre class="programlisting">auth       required        pam_unix.so
</pre> </td></tr></table></div>
    </p><p>
Ýkinci olarak, kullanýcý hesabýnýn geçerli olduðundan (yani parolasýnýn süresinin geçmediðinden veya bunun 
gibi bir uyumsuzluk olmadýðýndan) emin olmalýyýz.    
Bu 'account' türüdür ve <tt>pam_unix.so</tt> modülü ile saðlanýr.
Yine bu modülün kontrol türünü 'required' olarak atayacaðýz.
Bu satýrý da ekledikten sonra <tt>/etc/pam.d/httpd</tt> yapýlandýrma dosyamýz aþaðýdaki hale gelir:
    </p><p>
<div class="programlisting" align="right"><table width="95%" cellpadding="5" cellspacing="1" border="0" class="preoutline"><tr class="preinline"><td> <pre class="programlisting">auth       required        pam_unix.so
account    required        pam_unix.so
</pre> </td></tr></table></div>
    </p><p>
Çok karýþýk deðildir ama görevini yapar. PAM servislerini nasýl yapýlandýracaðýnýzý öðrenmek için iyi bir baþlangýç olabilir.
     </p></dd></div></dl></dd></div></dl><dl><div class="sect2"><dt><div> <h3 class="title"><a name="id5"></a>Apache'nin Yapýlandýrýlmasý</h3></div></dt><dd><p>
Artýk PAM apache isteklerinin kimlik denetimini yapacak þekilde yapýlandýrýldý. Bundan sonra apache'yi
<tt>aile/</tt> dizinine eriþimi kýsýtlamasý için PAM kimlik kanýtlamasýný kullanacak þekilde yapýlandýracaðýz.
Bunu yapabilmek için, aþaðýdaki satýrlarý <tt>httpd.conf</tt> dosyanýza (genellikle <tt>/etc/apache/</tt> ya da <tt>/etc/httpd</tt> dizininde bulunur) ekleyin:
    </p><p>
<div class="programlisting" align="right"><table width="95%" cellpadding="5" cellspacing="1" border="0" class="preoutline"><tr class="preinline"><td> <pre class="programlisting">&lt;Directory /var/www/family&gt;
AuthPAM_Enabled on
AllowOverride None
AuthName "Aile Sirlari"
AuthType "basic"
require group aile
&lt;/Directory&gt;
</pre> </td></tr></table></div>
    </p><p>
<tt>/var/www/</tt> ifadesini web sunucunuzun kök dizini ile deðiþtirmelisiniz. Bu dizin bazen <tt>/home/httpd/</tt> olabilmektedir. Her nerede olursa olsun, <tt>aile</tt> dizinini oluþturmalýsýnýz.
    </p><p>
Kurulumu denetlemeden önce Apache yapýlandýrmasýna yukarýda eklediklerinizi açýklayayým. 
&lt;Directory&gt; ifadesi yapýlandýrmanýn sadece bu dizin için geçerli olmasý için kullanýlýr.
Bu ifadenin içinde PAM kimlik denetimini etkinleþtirdik (&#8592;AuthPAM_enabled on&#8594;), baþka bir yapýlandýrmanýn
önceliði olmasýný engelledik (&#8592;AllowOverride none&#8594;), bu kimlik denetim alanýný &#8592;Aile Sirlari&#8594;
olarak adlandýrdýk (&#8592;AuthName 'Aile Sirlari'&#8594;), http kimlik kanýtlamasýný (PAM deðil)
öntanýmlý olarak atadýk (&#8592;AuthType 'basic'&#8594;) ve gerekli kullanýcý grubu olarak aile'yi atadýk (&#8592;require group aile&#8594;).
     </p></dd></div></dl><dl><div class="sect2"><dt><div> <h3 class="title"><a name="id6"></a>Kurulumun Denetlenmesi</h3></div></dt><dd><p>
Herþeyi gerektiði gibi kurduk, artýk kutlama zamanýdýr.
Tercih ettiðiniz web tarayýcýsýný çalýþtýrýn ve http://sizin-alaniniz/aile/ adresini (sizin-alaniniz yerine alanýnýzýn adýný yazýn) açýn.
Tebrikler, baþardýnýz!
    </p></dd></div></dl></dd></div></dl><h1></h1><table width="100%" summary="Navigation header" cellpadding="1" cellspacing="0" border="0"><tr><td bgcolor="black" class="navoutline"><table width="100%" cellpadding="0" cellspacing="0" border="0"><tr><td bgcolor="white" class="navinline"><table width="100%" cellpadding="3" cellspacing="0" border="0"><tr><td width="40%" align="left"><a accesskey="p" href="../howto/user-auth-howto-secure.html">Önceki</a> </td><td width="20%" align="center"><a accesskey="u" href="../howto/user-auth-howto.html">Üst Ana Baþlýk</a></td><td width="40%" align="right"> <a accesskey="n" href="../howto/user-auth-howto-res.html">Sonraki</a></td></tr><tr><td width="40%" align="left" valign="top">Kullanýcý Kimlik Denetimini Güvenli Hale Getirmek </td><td width="20%" align="center"><a accesskey="h" href="../KiTAPLIK/index.html">Baþlangýç</a></td><td width="40%" align="right" valign="top"> Kaynaklar</td></tr><tr><td colspan="3" align="center">
                  Bir <a href="http://www.belgeler.org/">Linux Kitaplýðý</a> Sayfasý
                </td></tr></table></td></tr></table></td></tr></table></body></html>
